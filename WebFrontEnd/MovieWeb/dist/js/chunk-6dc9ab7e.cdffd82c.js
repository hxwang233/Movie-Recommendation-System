(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dc9ab7e"],{"420a":function(e,t,a){"use strict";a("9095")},4471:function(e,t,a){"use strict";a("7401")},7401:function(e,t,a){},9095:function(e,t,a){},b403:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("a-button",{attrs:{type:"primary",icon:"plus-circle"},on:{click:e.showModal}},[e._v(" 添加 ")]),a("UserAddPage",{attrs:{visible:e.visible,ageList:e.ageList,occupationList:e.occupationList},on:{updateDataSource:e.updateDataSource,updatePopWinState:e.updatePopWinState}}),a("div",{staticStyle:{display:"flex","justify-content":"flex-start"}},[a("div",[e._v(" 搜关键字： "),a("a-input",{staticStyle:{width:"200px",margin:"20px 0"},attrs:{placeholder:"用户名/邮编"},model:{value:e.params.key,callback:function(t){e.$set(e.params,"key",t)},expression:"params.key"}})],1),a("div",{staticStyle:{margin:"20px 0 0 25px"}},[e._v(" 性别： "),a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"选择性别",allowClear:!0},model:{value:e.params.gender,callback:function(t){e.$set(e.params,"gender",t)},expression:"params.gender"}},[a("a-select-option",{attrs:{value:"M"}},[e._v("男")]),a("a-select-option",{attrs:{value:"F"}},[e._v("女")])],1)],1),a("a-button",{staticStyle:{margin:"20px 0 0 50px"},attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v(" 搜索 ")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticStyle:{display:"flex","justify-content":"flex-start"}},[a("div",[e._v(" 职业类型： "),a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择职业",allowClear:!0},model:{value:e.params.occupation,callback:function(t){e.$set(e.params,"occupation",t)},expression:"params.occupation"}},e._l(e.occupationList,(function(t,r){return a("a-select-option",{attrs:{value:r}},[e._v(" "+e._s(t)+" ")])})),1)],1),a("div",{staticStyle:{"margin-left":"25px"}},[e._v(" 年龄： "),a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"选择年龄段",allowClear:!0},model:{value:e.params.age,callback:function(t){e.$set(e.params,"age",t)},expression:"params.age"}},e._l(e.ageList,(function(t,r){return a("a-select-option",{attrs:{value:r}},[e._v(" "+e._s(t)+" ")])})),1)],1)]),a("a-divider",{staticStyle:{color:"#999999","margin-top":"-2px"}},[a("a-icon",{attrs:{type:e.collapsed?"down-circle":"up-circle"},on:{click:function(t){e.collapsed=!e.collapsed}}}),e._v(" "+e._s(e.collapsed?"展开":"收起")+"更多选项 ")],1)],1),a("a-table",{attrs:{columns:e.columns,"data-source":e.dataSource,loading:e.dataloading,pagination:{pageSize:e.pageSize},scroll:{y:280}},scopedSlots:e._u([{key:"name",fn:function(t){return a("b",{},[e._v(e._s(t))])}},{key:"gender",fn:function(t){return a("span",{},[e._v(e._s("M"==t?"男":"女"))])}},{key:"age",fn:function(t){return a("span",{domProps:{textContent:e._s(e.ageList[t])}})}},{key:"occupation",fn:function(t){return a("span",{domProps:{textContent:e._s(e.occupationList[t])}})}},{key:"action",fn:function(t,r){return a("span",{},[a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("a-popconfirm",{attrs:{title:"是否确定删除？","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.confirmDelete(r.uid)},cancel:e.cancel}},[a("a",[e._v("删除")])]),a("a-divider",{attrs:{type:"vertical"}}),a("router-view",{attrs:{record:r,ageList:e.ageList,occupationList:e.occupationList}}),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"是否确定重置密码？","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.confirmReset(r.uid)},cancel:e.cancel}},[a("a",[e._v("重置密码")])])],1)])}}])})],1)},n=[],o=(a("4de4"),a("4160"),a("2909")),s=(a("96cf"),a("1da1")),i=a("5530"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"编辑新用户","on-ok":"handleOk",afterClose:e.handleCancel,width:"800px","dialog-style":{top:"100px"}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.handleCancel}},[e._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:e.buttonloading},on:{click:e.handleOk}},[e._v(" 提交 ")])],1),a("div",[a("a-form",{attrs:{form:e.form,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,"hide-required-mark":""}},[a("div",{staticStyle:{"margin-top":"-10px",display:"flex","justify-content":"space-around"}},[a("div",[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"用户名不能为空"}]}],expression:"['name', {rules: [\n\t\t\t\t\t\t\t{ required: true, message: '用户名不能为空' }],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]"}],staticStyle:{width:"300px"},attrs:{placeholder:"请输入用户名"}})],1),a("a-form-item",{attrs:{label:"性别"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["gender"],expression:"['gender']"}],staticStyle:{width:"300px"},attrs:{placeholder:"请选择性别"}},[a("a-select-option",{attrs:{value:"M"}},[e._v("男")]),a("a-select-option",{attrs:{value:"F"}},[e._v("女")])],1)],1),a("a-form-item",{attrs:{label:"年龄"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["age"],expression:"['age']"}],staticStyle:{width:"300px"},attrs:{placeholder:"请选择年龄段"}},e._l(e.ageList,(function(t,r){return a("a-select-option",{attrs:{value:r}},[e._v(" "+e._s(t)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"职业"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["occupation"],expression:"['occupation']"}],staticStyle:{width:"300px"},attrs:{placeholder:"请选择职业"}},e._l(e.occupationList,(function(t,r){return a("a-select-option",{attrs:{value:r}},[e._v(" "+e._s(t)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"邮政编码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["zipCode",{rules:[{required:!0,message:"邮政编码不能为空"}]}],expression:"['zipCode', {rules: [\n\t\t\t\t\t\t\t{ required: true, message: '邮政编码不能为空' }],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]"}],staticStyle:{width:"300px"},attrs:{placeholder:"请输入邮编"}})],1)],1),a("a-form-item",[a("a-upload",{staticClass:"poster-uploader",attrs:{name:"file","list-type":"picture-card","show-upload-list":!1,action:this.$store.state.requestPath+"uploadHeadPic","before-upload":e.beforeUpload},on:{change:e.handleChange}},[e.imageUrl?a("img",{staticStyle:{width:"200px",height:"300px"},attrs:{src:e.imageUrl}}):a("div",[a("a-icon",{attrs:{type:e.picloading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(" 上传 ")])],1)])],1)],1)])],1)],2)},l=[],u=(a("b0c0"),a("2f62"));function d(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}var p={computed:Object(i["a"])({},Object(u["c"])(["userInfo","requestPath"])),props:["visible","ageList","occupationList"],data:function(){return{form:this.$form.createForm(this),labelCol:{span:4},wrapperCol:{span:14},imageUrl:"",newRow:{mid:null,name:null,genre:null,releaseTime:null,directors:null},user:{name:"undefine",age:"undefine",gender:"undefine",occupation:"undefine",zipCode:"undefine",headPic:"default.jpg"},picloading:!1,buttonloading:!1}},methods:{handleOk:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.form.validateFields(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a,r){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=12;break}return t.user.name=r.name,t.user.age=r.age,t.user.gender=r.gender,t.user.occupation=r.occupation,t.user.zipCode=r.zipCode,console.log(t.user),e.next=9,t.axios.post(t.requestPath+"addUser",t.user);case 9:n=e.sent,o=n.data,0==o.code?(t.$message.success("添加成功"),t.$emit("updateDataSource")):t.$message.error("添加失败");case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t.buttonloading=!0,setTimeout((function(){t.$emit("updatePopWinState",!1),t.buttonloading=!1}),2e3);case 3:case"end":return e.stop()}}),e)})))()},handleCancel:function(e){this.imageUrl=null,this.$emit("updatePopWinState",!1)},handleChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(d(e.file.originFileObj,(function(e){t.imageUrl=e,t.picloading=!1})),this.user.headPic=e.file.response.data.src):this.picloading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("You can only upload JPG file!");var a=e.size/1024/1024<2;return a||this.$message.error("Image must smaller than 2MB!"),t&&a}}},m=p,f=(a("420a"),a("2877")),g=Object(f["a"])(m,c,l,!1,null,null,null),v=g.exports,h=[{title:"用户名",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"性别",dataIndex:"gender",scopedSlots:{customRender:"gender"}},{title:"年龄",dataIndex:"age",scopedSlots:{customRender:"age"}},{title:"职业",dataIndex:"occupation",scopedSlots:{customRender:"occupation"}},{title:"邮编",dataIndex:"zipCode"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}];h.forEach((function(e){e.align="center"}));var x={components:{UserAddPage:v},data:function(){return{params:{key:null,age:null,occupation:null,gender:null},dataSource:null,page:1,pageSize:10,dataloading:!0,visible:!1,columns:h,collapsed:!0,ageList:{1:"Under 18",18:"18-24",25:"25-34",35:"35-44",45:"45-49",50:"50-55",56:"56+"},occupationList:["other","academic/educator","artist","clerical/admin","college/grad student","customer service","doctor/health care","executive/managerial","farmer","homemaker","K-12 student","lawyer","programmer","retired","sales/marketing","scientist","self-employed","technician/engineer","tradesman/craftsman","unemployed","writer"]}},computed:Object(i["a"])({},Object(u["c"])(["requestPath","userInfo"])),created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getAllAge(),e.getAllOccupation(),e.getAllUser();case 3:case"end":return t.stop()}}),t)})))()},methods:{getAllAge:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.state.userInfo){t.next=8;break}return t.next=3,e.$get(e.$store.state.requestPath+"allAge");case 3:a=t.sent,r=a.data,e.ageList=r.data,t.next=9;break;case 8:console.log("userInfo not found");case 9:case"end":return t.stop()}}),t)})))()},getAllOccupation:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.state.userInfo){t.next=8;break}return t.next=3,e.$get(e.$store.state.requestPath+"allOccupation");case 3:a=t.sent,r=a.data,e.occupationList=r.data,t.next=9;break;case 8:console.log("userInfo not found");case 9:case"end":return t.stop()}}),t)})))()},getAllUser:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.dataloading=!0,!e.$store.state.userInfo){t.next=10;break}return t.next=4,e.$get(e.$store.state.requestPath+"allUser");case 4:a=t.sent,r=a.data,e.dataSource=r.data,e.dataloading=!1,t.next=11;break;case 10:console.log("userInfo not found");case 11:case"end":return t.stop()}}),t)})))()},search:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataloading=!0,t.next=3,e.axios.post(e.requestPath+"searchUser",e.params);case 3:a=t.sent,r=a.data,e.dataSource=r.data,e.dataloading=!1;case 7:case"end":return t.stop()}}),t)})))()},confirmDelete:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("del_uid:"+e),a.next=3,t.$get(t.$store.state.requestPath+"delUser/"+e);case 3:r=a.sent,n=r.data,0==n.code?(t.$message.success("删除成功"),s=Object(o["a"])(t.dataSource),t.dataSource=s.filter((function(t){return t.uid!==e}))):t.$message.error("删除失败");case 6:case"end":return a.stop()}}),a)})))()},confirmReset:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("reset_uid:"+e),a.next=3,t.$get(t.$store.state.requestPath+"resetUserPwd/"+e);case 3:r=a.sent,n=r.data,0==n.code?t.$message.success("重置密码成功"):t.$message.error("重置密码失败");case 6:case"end":return a.stop()}}),a)})))()},cancel:function(e){console.log(e)},showModal:function(){this.visible=!0},updatePopWinState:function(e){this.visible=e},updateDataSource:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getAllUser();case 1:case"end":return t.stop()}}),t)})))()}}},w=x,b=(a("4471"),Object(f["a"])(w,r,n,!1,null,"624a4ff8",null));t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-6dc9ab7e.cdffd82c.js.map