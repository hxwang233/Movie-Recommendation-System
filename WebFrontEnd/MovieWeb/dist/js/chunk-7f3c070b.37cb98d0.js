(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f3c070b"],{3872:function(e,t,a){},"40a7":function(e,t,a){"use strict";var n=a("41b2"),r=a.n(n),s={today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"},i={placeholder:"请选择时间"},c=i,o={lang:r()({placeholder:"请选择日期",rangePlaceholder:["开始日期","结束日期"]},s),timePickerLocale:r()({},c)};o.lang.ok="确 定";t["a"]=o},c514:function(e,t,a){"use strict";a("3872")},e382:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("a-button",{attrs:{type:"primary",icon:"plus-circle"},on:{click:e.showModal}},[e._v(" 添加 ")]),a("AdminAddPage",{attrs:{visible:e.visible,allAccessList:e.allAccessList},on:{updateDataSource:e.updateDataSource,updatePopWinState:e.updatePopWinState}}),a("div",{staticStyle:{display:"flex","justify-content":"flex-start"}},[a("div",[e._v(" 搜关键字： "),a("a-input",{staticStyle:{width:"250px",margin:"20px 0"},attrs:{placeholder:"用户名/电子邮箱"},model:{value:e.params.key,callback:function(t){e.$set(e.params,"key",t)},expression:"params.key"}})],1),a("div",{staticStyle:{margin:"20px 0 0 25px"}},[e._v(" 权限： "),a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"选择权限",allowClear:!0},model:{value:e.params.access,callback:function(t){e.$set(e.params,"access",t)},expression:"params.access"}},e._l(e.allAccessList,(function(t){return a("a-select-option",{attrs:{value:t.id}},[e._v(e._s(t.menuKey))])})),1)],1),a("a-button",{staticStyle:{margin:"20px 0 0 50px"},attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v(" 搜索 ")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}]},[a("div",[e._v(" 创建时间： "),a("a-range-picker",{staticStyle:{width:"250px"},attrs:{locale:e.locale},on:{change:e.onChange}})],1)]),a("a-divider",{staticStyle:{color:"#999999","margin-top":"-2px"}},[a("a-icon",{attrs:{type:e.collapsed?"down-circle":"up-circle"},on:{click:function(t){e.collapsed=!e.collapsed}}}),e._v(" "+e._s(e.collapsed?"展开":"收起")+"更多选项 ")],1)],1),a("a-table",{attrs:{columns:e.columns,"data-source":e.dataSource,loading:e.dataloading,pagination:{pageSize:e.pageSize},scroll:{y:280}},scopedSlots:e._u([{key:"name",fn:function(t){return a("b",{},[e._v(e._s(t))])}},{key:"access",fn:function(t,n){return n.accessList?a("span",{},e._l(n.accessList,(function(t){return a("a-tag",{attrs:{color:t.tagColor}},[e._v(" "+e._s(t.menuKey)+" ")])})),1):e._e()}},{key:"action",fn:function(t,n){return a("span",{},[a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("a-popconfirm",{attrs:{title:"是否确定删除？","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.confirmDelete(n.uid)},cancel:e.cancel}},[a("a",[e._v("删除")])]),a("a-divider",{attrs:{type:"vertical"}}),a("router-view",{attrs:{record:n,allAccessList:e.allAccessList},on:{updateDataSource:e.updateDataSource}}),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"是否确定重置密码？","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.confirmReset(n.uid)},cancel:e.cancel}},[a("a",[e._v("重置密码")])])],1)])}}],null,!0)})],1)},r=[],s=(a("4de4"),a("4160"),a("2909")),i=(a("96cf"),a("1da1")),c=a("5530"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"编辑新管理员","on-ok":"handleOk",afterClose:e.handleCancel,width:"800px","dialog-style":{top:"100px"}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.handleCancel}},[e._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:e.buttonloading},on:{click:e.handleOk}},[e._v(" 提交 ")])],1),a("div",[a("a-form",{attrs:{form:e.form,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,"hide-required-mark":""}},[a("div",{staticStyle:{"margin-top":"-10px",display:"flex","justify-content":"space-around"}},[a("div",[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"用户名不能为空"}]}],expression:"['name', {rules: [\n\t\t\t\t\t\t\t{ required: true, message: '用户名不能为空' }],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]"}],staticStyle:{width:"300px"},attrs:{placeholder:"请输入用户名"}})],1),a("a-form-item",{attrs:{label:"邮箱"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email"],expression:"['email']"}],staticStyle:{width:"300px"},attrs:{placeholder:"请输入电子邮箱"}})],1),a("a-form-item",{attrs:{label:"权限"}},[a("a-checkbox-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["access",{rules:[{required:!0,message:"权限不能为空"}]}],expression:"['access', {rules: [\n\t\t\t\t\t\t\t{ required: true, message: '权限不能为空' }],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]"}],staticStyle:{margin:"5px 0 0 5px",width:"300px"},attrs:{placeholder:"请选择权限"}},e._l(e.allAccessList,(function(t){return a("a-checkbox",{staticStyle:{"vertical-align":"middle"},attrs:{value:t.id,name:t.menuKey}},[e._v(" "+e._s(t.menuKey)+" ")])})),1)],1)],1),a("a-form-item",[a("a-upload",{staticClass:"poster-uploader",attrs:{name:"file","list-type":"picture-card","show-upload-list":!1,action:this.$store.state.requestPath+"uploadHeadPic","before-upload":e.beforeUpload},on:{change:e.handleChange}},[e.imageUrl?a("img",{staticStyle:{width:"200px",height:"300px"},attrs:{src:e.imageUrl}}):a("div",[a("a-icon",{attrs:{type:e.picloading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(" 上传 ")])],1)])],1)],1)])],1)],2)},l=[],u=(a("b0c0"),a("2f62"));function d(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}var p={computed:Object(c["a"])({},Object(u["c"])(["userInfo","requestPath"])),props:["visible","allAccessList"],data:function(){return{form:this.$form.createForm(this),labelCol:{span:4},wrapperCol:{span:14},imageUrl:"",admin:{name:null,email:null,headPic:"default.jpg",access:null},picloading:!1,buttonloading:!1}},methods:{handleOk:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.form.validateFields(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a,n){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=10;break}return t.admin.name=n.name,t.admin.email=n.email,t.admin.access=n.access,console.log(t.admin),e.next=7,t.axios.post(t.requestPath+"addAdmin",t.admin);case 7:r=e.sent,s=r.data,0==s.code?(t.$message.success("添加成功"),t.$emit("updateDataSource")):t.$message.error("添加失败");case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t.buttonloading=!0,setTimeout((function(){t.$emit("updatePopWinState",!1),t.buttonloading=!1}),2e3);case 3:case"end":return e.stop()}}),e)})))()},handleCancel:function(e){this.imageUrl=null,this.$emit("updatePopWinState",!1)},handleChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(d(e.file.originFileObj,(function(e){t.imageUrl=e,t.picloading=!1})),this.user.headPic=e.file.response.data.src):this.picloading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("You can only upload JPG file!");var a=e.size/1024/1024<2;return a||this.$message.error("Image must smaller than 2MB!"),t&&a}}},m=p,f=(a("c514"),a("2877")),g=Object(f["a"])(m,o,l,!1,null,null,null),h=g.exports,v=a("40a7"),x=[{title:"用户名",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"电子邮箱",dataIndex:"email"},{title:"创建时间",dataIndex:"createdTime"},{title:"权限",dataIndex:"access",scopedSlots:{customRender:"access"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}];x.forEach((function(e){e.align="center"}));var b={components:{AdminAddPage:h},data:function(){return{locale:v["a"],params:{key:null,access:null,startTime:null,endTime:null},dataSource:null,page:1,pageSize:10,dataloading:!0,visible:!1,columns:x,collapsed:!0,allAccessList:null}},computed:Object(c["a"])({},Object(u["c"])(["requestPath","userInfo"])),created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getAccessList(),e.getAllAdmin();case 2:case"end":return t.stop()}}),t)})))()},methods:{onChange:function(e,t){this.params.startTime=t[0],this.params.endTime=t[1]},getAccessList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.state.userInfo){t.next=9;break}return t.next=3,e.$get(e.$store.state.requestPath+"allAccess");case 3:a=t.sent,n=a.data,console.log(n),e.allAccessList=n.data,t.next=10;break;case 9:console.log("userInfo not found");case 10:case"end":return t.stop()}}),t)})))()},getAllAdmin:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.dataloading=!0,!e.$store.state.userInfo){t.next=11;break}return t.next=4,e.$get(e.$store.state.requestPath+"allAdmin");case 4:a=t.sent,n=a.data,console.log(n),e.dataSource=n.data,e.dataloading=!1,t.next=12;break;case 11:console.log("userInfo not found");case 12:case"end":return t.stop()}}),t)})))()},search:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataloading=!0,t.next=3,e.axios.post(e.requestPath+"searchAdmin",e.params);case 3:a=t.sent,n=a.data,e.dataSource=n.data,e.dataloading=!1;case 7:case"end":return t.stop()}}),t)})))()},confirmDelete:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("del_uid:"+e),a.next=3,t.$get(t.$store.state.requestPath+"delAdmin/"+e);case 3:n=a.sent,r=n.data,0==r.code?(t.$message.success("删除成功"),i=Object(s["a"])(t.dataSource),t.dataSource=i.filter((function(t){return t.uid!==e}))):t.$message.error("删除失败");case 6:case"end":return a.stop()}}),a)})))()},confirmReset:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("reset_uid:"+e),a.next=3,t.$get(t.$store.state.requestPath+"resetAdminPwd/"+e);case 3:n=a.sent,r=n.data,0==r.code?t.$message.success("重置密码成功"):t.$message.error("重置密码失败");case 6:case"end":return a.stop()}}),a)})))()},cancel:function(e){console.log(e)},showModal:function(){this.visible=!0},updatePopWinState:function(e){this.visible=e},updateDataSource:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getAllAdmin();case 1:case"end":return t.stop()}}),t)})))()}}},w=b,y=Object(f["a"])(w,n,r,!1,null,null,null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-7f3c070b.37cb98d0.js.map