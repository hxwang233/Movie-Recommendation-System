(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a0b5f2c2"],{"6e77":function(t,e,a){},"80a7":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.movie?a("div",{attrs:{id:"detail"}},[a("div",{attrs:{id:"detail-pic"}},[a("a-card",{staticStyle:{width:"240px"},attrs:{bordered:!1}},[a("img",{attrs:{slot:"cover",alt:"example",src:t.picRequestPath+"poster/"+t.movie.pic},slot:"cover"})])],1),a("div",{attrs:{id:"detail-text"}},[a("a-card",{staticStyle:{width:"700px"},attrs:{title:t.movie.name,bordered:!1,headStyle:t.tstyle}},[a("div",{attrs:{id:"card-text"}},[a("p",[t._v("导演："),a("b",[t._v(t._s(t.movie.directors))])]),a("p",[t._v("编剧："),a("b",[t._v(t._s(t.movie.writers))])]),a("p",[t._v("演员："),a("b",[t._v(t._s(t.movie.stars))])]),a("p",[t._v("类别："),a("b",[t._v(t._s(t.movie.genre))])]),a("p",[t._v("片长："),a("b",[t._v(t._s(t.movie.playTime))])]),a("p",[t._v("上映日期："),a("b",[t._v(t._s(t.movie.releaseTime))])])])])],1),a("a-divider",{attrs:{orientation:"left"}},[t._v(" 简介 ")]),a("div",{attrs:{id:"detail-intro"}},[a("a-card",{staticStyle:{width:"1200px"},attrs:{bordered:!1}},[a("div",{attrs:{id:"detail-intro-text"}},[a("p",[t._v(t._s(t.movie.intro))])])])],1),a("a-divider",{attrs:{orientation:"left"}},[t._v(" 影评 ")]),t.$store.state.userInfo?a("div",[a("div",{staticClass:"detail-comment"},[a("a-list",{staticClass:"comment-list",attrs:{header:t.comments.length+" "+(t.comments.length>1?"replies":"reply"),"item-layout":"horizontal","data-source":t.comments},scopedSlots:t._u([{key:"renderItem",fn:function(e,r){return a("a-list-item",{},[a("a-comment",{attrs:{author:e.uname,avatar:t.picRequestPath+"headpic/"+e.headPic}},[a("p",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.content))]),a("a-tooltip",{attrs:{slot:"datetime",title:t.moment(e.createdTime).format("YYYY-MM-DD HH:mm:ss")},slot:"datetime"},[a("span",[t._v(t._s(t.moment(e.createdTime).fromNow()))])])],1)],1)}}],null,!1,3369606776)})],1),a("a-divider",{attrs:{orientation:"left"}},[t._v(" 说点什么吧... ")]),a("div",{staticClass:"detail-comment"},[a("a-comment",[a("a-avatar",{attrs:{slot:"avatar",src:t.picRequestPath+"headpic/"+t.userInfo.headPic,alt:t.userInfo.name},slot:"avatar"}),a("div",{attrs:{slot:"content"},slot:"content"},[a("a-form-item",[a("a-textarea",{staticStyle:{width:"1100px"},attrs:{rows:4,value:t.value},on:{change:t.handleChange}})],1),a("a-form-item",[a("a-button",{attrs:{"html-type":"submit",loading:t.submitting,type:"primary"},on:{click:t.handleSubmit}},[t._v(" 提交 ")])],1)],1)],1)],1)],1):a("div",{staticClass:"detail-comment"},[t._m(0)])],1):t._e()},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("a",{attrs:{href:"/"}},[t._v("登录")]),t._v("后查看")])}],i=(a("99af"),a("b0c0"),a("2909")),s=a("5530"),o=(a("96cf"),a("1da1")),c=a("c1df"),m=a.n(c),u=a("2f62"),d={created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getMovieDetail(),t.getComments();case 2:case"end":return e.stop()}}),e)})))()},watch:{$route:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getMovieDetail(),this.getComments();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},computed:Object(s["a"])({},Object(u["c"])(["requestPath","userInfo","movie","movieComments","picRequestPath"])),methods:Object(s["a"])(Object(s["a"])({},Object(u["b"])(["setMovie","setMovieComments"])),{},{getMovieDetail:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$get(t.$store.state.requestPath+"movie/"+t.$route.query.mid+"/"+t.userInfo.uid);case 2:a=e.sent,r=a.data,t.setMovie(r);case 5:case"end":return e.stop()}}),e)})))()},getComments:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$get(t.$store.state.requestPath+"comment/get/"+t.$route.query.mid);case 2:a=e.sent,r=a.data,t.setMovieComments(r),t.comments=t.$store.state.movieComments;case 6:case"end":return e.stop()}}),e)})))()},addComment:function(t){var e=this,a={uid:this.$store.state.userInfo.uid,mid:this.$route.query.mid,content:t},r=this.axios.post(this.$store.state.requestPath+"comment/add",a).then((function(t){0!=t.data.code?e.$message.error(" (￣△￣；) 提交评论失败~ 再试试吧 ",1):e.$message.success(" <(￣︶￣)> 感谢您的评论~ ",1)}));r.data},handleSubmit:function(){var t=this;this.value&&(this.submitting=!0,setTimeout((function(){t.addComment(t.value),t.submitting=!1,t.comments=[{uname:t.$store.state.userInfo.name,headPic:t.$store.state.userInfo.headPic,content:t.value,createdTime:m()()}].concat(Object(i["a"])(t.comments)),t.value=""}),1e3))},handleChange:function(t){this.value=t.target.value}}),data:function(){return{tstyle:{"font-size":"xx-large"},comments:this.$store.state.movieComments,submitting:!1,value:"",moment:m.a}}},l=d,v=(a("b221"),a("2877")),h=Object(v["a"])(l,r,n,!1,null,null,null);e["default"]=h.exports},"99af":function(t,e,a){"use strict";var r=a("23e7"),n=a("d039"),i=a("e8b5"),s=a("861d"),o=a("7b0b"),c=a("50c4"),m=a("8418"),u=a("65f0"),d=a("1dde"),l=a("b622"),v=a("2d00"),h=l("isConcatSpreadable"),f=9007199254740991,p="Maximum allowed index exceeded",b=v>=51||!n((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=d("concat"),_=function(t){if(!s(t))return!1;var e=t[h];return void 0!==e?!!e:i(t)},w=!b||!g;r({target:"Array",proto:!0,forced:w},{concat:function(t){var e,a,r,n,i,s=o(this),d=u(s,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?s:arguments[e],_(i)){if(n=c(i.length),l+n>f)throw TypeError(p);for(a=0;a<n;a++,l++)a in i&&m(d,l,i[a])}else{if(l>=f)throw TypeError(p);m(d,l++,i)}return d.length=l,d}})},b221:function(t,e,a){"use strict";a("6e77")}}]);
//# sourceMappingURL=chunk-a0b5f2c2.613f1b38.js.map