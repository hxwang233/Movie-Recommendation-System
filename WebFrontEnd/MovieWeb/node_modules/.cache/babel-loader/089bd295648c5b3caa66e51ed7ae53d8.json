{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\babel-loader\\lib\\index.js!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\user\\MovieDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\user\\MovieDetail.vue","mtime":1614691824567},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiRDovSmF2YVdlYkFwcGxpY2F0aW9uL1dlYkZyb250RW5kL01vdmllV2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L0phdmFXZWJBcHBsaWNhdGlvbi9XZWJGcm9udEVuZC9Nb3ZpZVdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L0phdmFXZWJBcHBsaWNhdGlvbi9XZWJGcm9udEVuZC9Nb3ZpZVdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IHsgbWFwTXV0YXRpb25zLCBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzLmdldE1vdmllRGV0YWlsKCk7CgogICAgICAgICAgICAgIF90aGlzLmdldENvbW1lbnRzKCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoWydyZXF1ZXN0UGF0aCcsICd1c2VySW5mbycsICdtb3ZpZScsICdtb3ZpZUNvbW1lbnRzJ10pKSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucyhbInNldE1vdmllIiwgInNldE1vdmllQ29tbWVudHMiXSkpLCB7fSwgewogICAgZ2V0TW92aWVEZXRhaWw6IGZ1bmN0aW9uIGdldE1vdmllRGV0YWlsKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfeWllbGQkX3RoaXMyJCRnZXQsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRnZXQoX3RoaXMyLiRzdG9yZS5zdGF0ZS5yZXF1ZXN0UGF0aCArICdtb3ZpZS8nICsgX3RoaXMyLiRyb3V0ZS5xdWVyeS5taWQgKyAnLycgKyBfdGhpczIudXNlckluZm8udWlkKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3lpZWxkJF90aGlzMiQkZ2V0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJF90aGlzMiQkZ2V0LmRhdGE7CgogICAgICAgICAgICAgICAgX3RoaXMyLnNldE1vdmllKGRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRDb21tZW50czogZnVuY3Rpb24gZ2V0Q29tbWVudHMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIF95aWVsZCRfdGhpczMkJGdldCwgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuJGdldChfdGhpczMuJHN0b3JlLnN0YXRlLnJlcXVlc3RQYXRoICsgJ2NvbW1lbnQvZ2V0LycgKyBfdGhpczMuJHJvdXRlLnF1ZXJ5Lm1pZCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF95aWVsZCRfdGhpczMkJGdldCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRfdGhpczMkJGdldC5kYXRhOwoKICAgICAgICAgICAgICAgIF90aGlzMy5zZXRNb3ZpZUNvbW1lbnRzKGRhdGEpOwoKICAgICAgICAgICAgICAgIF90aGlzMy5jb21tZW50cyA9IF90aGlzMy4kc3RvcmUuc3RhdGUubW92aWVDb21tZW50czsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYWRkQ29tbWVudDogZnVuY3Rpb24gYWRkQ29tbWVudChjb250ZW50KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIGNvbW1lbnQgPSB7CiAgICAgICAgdWlkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby51aWQsCiAgICAgICAgbWlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5taWQsCiAgICAgICAgY29udGVudDogY29udGVudAogICAgICB9OwoKICAgICAgdmFyIF90aGlzJGF4aW9zJHBvc3QkdGhlbiA9IHRoaXMuYXhpb3MucG9zdCh0aGlzLiRzdG9yZS5zdGF0ZS5yZXF1ZXN0UGF0aCArICdjb21tZW50L2FkZCcsIGNvbW1lbnQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlICE9IDApIHsKICAgICAgICAgIF90aGlzNC4kbWVzc2FnZS5lcnJvcignICjvv6PilrPvv6PvvJspIOaPkOS6pOivhOiuuuWksei0pX4g5YaN6K+V6K+V5ZCnICcsIDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczQuJG1lc3NhZ2Uuc3VjY2VzcygnIDwo77+j77i277+jKT4g5oSf6LCi5oKo55qE6K+E6K66fiAnLCAxKTsKICAgICAgICB9CiAgICAgIH0pLAogICAgICAgICAgZGF0YSA9IF90aGlzJGF4aW9zJHBvc3QkdGhlbi5kYXRhOwogICAgfSwKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIGlmICghdGhpcy52YWx1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5zdWJtaXR0aW5nID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM1LmFkZENvbW1lbnQoX3RoaXM1LnZhbHVlKTsKCiAgICAgICAgX3RoaXM1LnN1Ym1pdHRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpczUuY29tbWVudHMgPSBbewogICAgICAgICAgdW5hbWU6IF90aGlzNS4kc3RvcmUuc3RhdGUudXNlckluZm8ubmFtZSwKICAgICAgICAgIGhlYWRQaWM6IF90aGlzNS4kc3RvcmUuc3RhdGUudXNlckluZm8uaGVhZFBpYywKICAgICAgICAgIGNvbnRlbnQ6IF90aGlzNS52YWx1ZSwKICAgICAgICAgIGNyZWF0ZWRUaW1lOiBtb21lbnQoKQogICAgICAgIH1dLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoX3RoaXM1LmNvbW1lbnRzKSk7CiAgICAgICAgX3RoaXM1LnZhbHVlID0gJyc7CiAgICAgIH0sIDEwMDApOwogICAgfSwKICAgIGhhbmRsZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKGUpIHsKICAgICAgdGhpcy52YWx1ZSA9IGUudGFyZ2V0LnZhbHVlOwogICAgfQogIH0pLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0c3R5bGU6IHsKICAgICAgICAiZm9udC1zaXplIjogInh4LWxhcmdlIgogICAgICB9LAogICAgICBjb21tZW50czogdGhpcy4kc3RvcmUuc3RhdGUubW92aWVDb21tZW50cywKICAgICAgc3VibWl0dGluZzogZmFsc2UsCiAgICAgIHZhbHVlOiAnJywKICAgICAgbW9tZW50OiBtb21lbnQKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["MovieDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div id=\"detail\" v-if=\"movie\">\r\n\t\t<div id=\"detail-pic\">\r\n\t\t\t<a-card :bordered=\"false\" style=\"width: 240px\">\r\n\t\t\t\t<img slot=\"cover\" alt=\"example\" :src=\"requestPath + 'movieposter/' + movie.pic\" />\r\n\t\t\t</a-card>\r\n\t\t</div>\r\n\t\t<div id=\"detail-text\">\r\n\t\t\t<a-card :title=\"movie.name\" :bordered=\"false\" style=\"width: 700px\" :headStyle=\"tstyle\">\r\n\t\t\t\t<div id=\"card-text\">\r\n\t\t\t\t\t<p>导演：<b>{{movie.directors}}</b></p>\r\n\t\t\t\t\t<p>编剧：<b>{{movie.writers}}</b></p>\r\n\t\t\t\t\t<p>演员：<b>{{movie.stars}}</b></p>\r\n\t\t\t\t\t<p>类别：<b>{{movie.genre}}</b></p>\r\n\t\t\t\t\t<p>片长：<b>{{movie.playTime}}</b></p>\r\n\t\t\t\t\t<p>上映日期：<b>{{movie.releaseTime}}</b></p>\r\n\t\t\t\t</div>\r\n\t\t\t</a-card>\r\n\t\t</div>\r\n\t\t<a-divider orientation=\"left\">\r\n\t\t\t简介\r\n\t\t</a-divider>\r\n\t\t<div id=\"detail-intro\">\r\n\t\t\t<a-card :bordered=\"false\" style=\"width: 1200px\">\r\n\t\t\t\t<div id=\"detail-intro-text\">\r\n\t\t\t\t\t<p>{{movie.intro}}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</a-card>\r\n\t\t</div>\r\n\t\t<a-divider orientation=\"left\">\r\n\t\t\t影评\r\n\t\t</a-divider>\r\n\t\t<div v-if=\"$store.state.userInfo\">\r\n\t\t\t<div class=\"detail-comment\">\r\n\t\t\t\t<a-list class=\"comment-list\" :header=\"`${comments.length} ${comments.length > 1 ? 'replies' : 'reply'}`\"\r\n\t\t\t\t item-layout=\"horizontal\" :data-source=\"comments\">\r\n\t\t\t\t\t<a-list-item slot=\"renderItem\" slot-scope=\"item, index\">\r\n\t\t\t\t\t\t<a-comment :author=\"item.uname\" :avatar=\"requestPath + 'userpic/' + item.headPic\">\r\n\t\t\t\t\t\t\t<p slot=\"content\">{{ item.content }}</p>\r\n\t\t\t\t\t\t\t<a-tooltip slot=\"datetime\" :title=\"moment(item.createdTime).format('YYYY-MM-DD HH:mm:ss')\">\r\n\t\t\t\t\t\t\t\t<span>{{ moment(item.createdTime).fromNow() }}</span>\r\n\t\t\t\t\t\t\t</a-tooltip>\r\n\t\t\t\t\t\t</a-comment>\r\n\t\t\t\t\t</a-list-item>\r\n\t\t\t\t</a-list>\r\n\t\t\t</div>\r\n\t\t\t<a-divider orientation=\"left\">\r\n\t\t\t\t说点什么吧...\r\n\t\t\t</a-divider>\r\n\t\t\t<div class=\"detail-comment\">\r\n\t\t\t\t<a-comment>\r\n\t\t\t\t\t<a-avatar slot=\"avatar\" :src=\"requestPath + 'userpic/' +userInfo.headPic\" :alt=\"userInfo.name\" />\r\n\t\t\t\t\t<div slot=\"content\">\r\n\t\t\t\t\t\t<a-form-item>\r\n\t\t\t\t\t\t\t<a-textarea :rows=\"4\" :value=\"value\" @change=\"handleChange\" style=\"width: 1100px;\"/>\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t<a-form-item>\r\n\t\t\t\t\t\t\t<a-button html-type=\"submit\" :loading=\"submitting\" type=\"primary\" @click=\"handleSubmit\">\r\n\t\t\t\t\t\t\t\t提交\r\n\t\t\t\t\t\t\t</a-button>\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a-comment>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"detail-comment\" v-else>\r\n\t\t\t<p><a href=\"/\">登录</a>后查看</p>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport moment from 'moment';\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from \"vuex\";\r\n\texport default {\r\n\t\tasync created() {\r\n\t\t\tthis.getMovieDetail();\r\n\t\t\tthis.getComments();\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['requestPath', 'userInfo', 'movie', 'movieComments'])\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\"setMovie\", \"setMovieComments\"]),\r\n\t\t\tasync getMovieDetail() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'movie/' + this.$route.query.mid+ '/' + this.userInfo.uid);\r\n\t\t\t\tthis.setMovie(data);\r\n\t\t\t},\r\n\t\t\tasync getComments() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'comment/get/' + this.$route.query.mid);\r\n\t\t\t\tthis.setMovieComments(data);\r\n\t\t\t\tthis.comments = this.$store.state.movieComments;\r\n\t\t\t},\r\n\t\t\taddComment(content) {\r\n\t\t\t\tlet comment = {\r\n\t\t\t\t\tuid: this.$store.state.userInfo.uid,\r\n\t\t\t\t\tmid: this.$route.query.mid,\r\n\t\t\t\t\tcontent: content\r\n\t\t\t\t};\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = this.axios.post(this.$store.state.requestPath + 'comment/add', comment).then((res) => {\r\n\t\t\t\t\tif (res.data.code != 0) {\r\n\t\t\t\t\t\tthis.$message.error(' (￣△￣；) 提交评论失败~ 再试试吧 ', 1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.success(' <(￣︶￣)> 感谢您的评论~ ', 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleSubmit() {\r\n\t\t\t\tif (!this.value) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.submitting = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.addComment(this.value);\r\n\t\t\t\t\tthis.submitting = false;\r\n\t\t\t\t\tthis.comments = [{\r\n\t\t\t\t\t\t\tuname: this.$store.state.userInfo.name,\r\n\t\t\t\t\t\t\theadPic: this.$store.state.userInfo.headPic,\r\n\t\t\t\t\t\t\tcontent: this.value,\r\n\t\t\t\t\t\t\tcreatedTime: moment(),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t...this.comments,\r\n\t\t\t\t\t];\r\n\t\t\t\t\tthis.value = '';\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\thandleChange(e) {\r\n\t\t\t\tthis.value = e.target.value;\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttstyle: {\r\n\t\t\t\t\t\"font-size\": \"xx-large\"\r\n\t\t\t\t},\r\n\t\t\t\tcomments: this.$store.state.movieComments,\r\n\t\t\t\tsubmitting: false,\r\n\t\t\t\tvalue: '',\r\n\t\t\t\tmoment,\r\n\t\t\t};\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang='scss'>\r\n\t#detail {\r\n\t\tmargin: 0 120px 50px 120px;\r\n\r\n\t\t#detail-pic {\r\n\t\t\tfloat: left;\r\n\t\t\tmargin: 70px 20px 50px 150px;\r\n\t\t}\r\n\r\n\t\t#detail-text {\r\n\t\t\tfloat: left;\r\n\t\t\tpadding: 30px;\r\n\t\t\tmargin: 30px 20px 50px 40px;\r\n\r\n\t\t\t#card-text {\r\n\t\t\t\tfont-size: medium;\r\n\t\t\t\tpadding: 20px 30px 20px 24px;\r\n\t\t\t\tmargin: -20px;\r\n\t\t\t\tbackground: #ECECEC;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t#detail-intro {\r\n\t\t\tfloat: left;\r\n\t\t\tmargin: -10px 20px 30px 70px;\r\n\r\n\t\t\t#detail-intro-text {\r\n\t\t\t\tpadding: 5px 30px 20px 30px;\r\n\t\t\t\tmargin: -20px;\r\n\t\t\t\tbackground: #ECECEC;\r\n\t\t\t\tfont-size: medium;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.detail-comment {\r\n\t\t\tmargin: 10px 20px 20px 70px;\r\n\t\t}\r\n\t}\r\n</style>\n"],"sourceRoot":"src/components/user"}]}