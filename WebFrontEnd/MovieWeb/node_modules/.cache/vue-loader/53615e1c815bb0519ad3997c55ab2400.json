{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\UserInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\UserInfo.vue","mtime":1608541113406},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CgltYXBNdXRhdGlvbnMsCgltYXBTdGF0ZQp9IGZyb20gJ3Z1ZXgnCgpmdW5jdGlvbiBnZXRCYXNlNjQoaW1nLCBjYWxsYmFjaykgewoJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCXJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gY2FsbGJhY2socmVhZGVyLnJlc3VsdCkpOwoJcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1nKTsKfQpleHBvcnQgZGVmYXVsdCB7Cgljb21wdXRlZDogewoJCS4uLm1hcFN0YXRlKFsndXNlckluZm8nLCAncmVxdWVzdFBhdGgnXSkKCX0sCglkYXRhKCkgewoJCXJldHVybiB7CgkJCWZsYWc6IC0xLAoJCQlsYWJlbENvbDogewoJCQkJc3BhbjogNAoJCQl9LAoJCQl3cmFwcGVyQ29sOiB7CgkJCQlzcGFuOiAxNAoJCQl9LAoJCQl1c2VyOiB7CgkJCQkibmFtZSI6ICJ1bmRlZmluZSIsCgkJCQkicGFzc3dvcmQiOiAidW5kZWZpbmUiLAoJCQkJImdlbmRlciI6ICJ1bmRlZmluZSIsCgkJCQkiYWdlIjogbnVsbCwKCQkJCSJvY2N1cGF0aW9uIjogbnVsbCwKCQkJCSJ6aXBDb2RlIjogInVuZGVmaW5lIiwKCQkJCSJoZWFkUGljIjogImRlZmF1bHQuanBnIgoJCQl9LAoJCQlvY2N1cGF0aW9uTGlzdDogWydvdGhlcicsICdhY2FkZW1pYy9lZHVjYXRvcicsICdhcnRpc3QnLCAnY2xlcmljYWwvYWRtaW4nLCAnY29sbGVnZS9ncmFkIHN0dWRlbnQnLAoJCQkJJ2N1c3RvbWVyIHNlcnZpY2UnLCAnZG9jdG9yL2hlYWx0aCBjYXJlJywgJ2V4ZWN1dGl2ZS9tYW5hZ2VyaWFsJywgJ2Zhcm1lcicsICdob21lbWFrZXInLCAnSy0xMiBzdHVkZW50JywKCQkJCSdsYXd5ZXInLCAncHJvZ3JhbW1lcicsICdyZXRpcmVkJywgJ3NhbGVzL21hcmtldGluZycsICdzY2llbnRpc3QnLCAnc2VsZi1lbXBsb3llZCcsCgkJCQkndGVjaG5pY2lhbi9lbmdpbmVlcicsICd0cmFkZXNtYW4vY3JhZnRzbWFuJywgJ3VuZW1wbG95ZWQnLCAnd3JpdGVyJwoJCQldLAoJCQlsb2FkaW5nOiBmYWxzZSwKCQkJaW1hZ2VVcmw6ICcnLAoJCX07Cgl9LAoJd2F0Y2g6IHsKCQl1c2VyOiB7CgkJCWhhbmRsZXI6IGZ1bmN0aW9uKHZhbCwgb2xkdmFsKSB7CgkJCQl0aGlzLmZsYWcgPSB0aGlzLmZsYWcgKyAxOwoJCQl9LAoJCQlkZWVwOiB0cnVlIC8v5a+56LGh5YaF6YOo55qE5bGe5oCn55uR5ZCs77yM5Lmf5Y+r5rex5bqm55uR5ZCsCgkJfSwKCX0sCglhc3luYyBjcmVhdGVkKCkgewoJCU9iamVjdC5hc3NpZ24odGhpcy51c2VyLCB0aGlzLnVzZXJJbmZvKTsKCQl0aGlzLmltYWdlVXJsID0gdGhpcy51c2VyLmhlYWRQaWM7Cgl9LAoJbWV0aG9kczogewoJCS4uLm1hcE11dGF0aW9ucyhbJ3VwZGF0ZVVzZXJJbmZvJ10pLAoJCWFzeW5jIHVzZXJVcGRhdGUoKSB7CgkJCWxldCB7CgkJCQlkYXRhCgkJCX0gPSBhd2FpdCB0aGlzLmF4aW9zLnBvc3QodGhpcy5yZXF1ZXN0UGF0aCArICd1c2VyVXBkYXRlLycsIHRoaXMudXNlcik7CgkJCWlmIChkYXRhLmNvZGUgPT0gMCkgewoJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCcgKO+9oe+9peKIgO+9pSnvvonvvp4g5L+u5pS55oiQ5YqffiAnLCAxKTsKCQkJCXRoaXMudXBkYXRlVXNlckluZm8odGhpcy51c2VyKTsgIC8vIOabtOaWsOWFqOWxgOaVsOaNrgoJCQkJdGhpcy5vbkJhY2soKTsKCQkJfSBlbHNlIHsKCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoJyAo77+j4paz77+j77ybKSDlh7rplJnllaZ+ICcsIDIpOwoJCQl9CgkJfSwKCQlhc3luYyBvblN1Ym1pdCgpIHsKCQkJaWYgKHRoaXMuZmxhZyA+IDAgJiYgdGhpcy51c2VySW5mbykgewoJCQkJdGhpcy51c2VyVXBkYXRlKCk7CgkJCX0KCQl9LAoJCW9uQmFjaygpIHsKCQkJdGhpcy4kcm91dGVyLnB1c2goewoJCQkJcGF0aDogJy9ob21lJwoJCQl9KTsKCQl9LAoJCWhhbmRsZUNoYW5nZShpbmZvKSB7CgkJCWlmIChpbmZvLmZpbGUuc3RhdHVzID09PSAndXBsb2FkaW5nJykgewoJCQkJdGhpcy5sb2FkaW5nID0gdHJ1ZTsKCQkJCXJldHVybjsKCQkJfQoJCQlpZiAoaW5mby5maWxlLnN0YXR1cyA9PT0gJ2RvbmUnKSB7CgkJCQlnZXRCYXNlNjQoaW5mby5maWxlLm9yaWdpbkZpbGVPYmosIGltYWdlVXJsID0+IHsKCQkJCQl0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7CgkJCQkJdGhpcy5sb2FkaW5nID0gZmFsc2U7CgkJCQl9KTsKCQkJCXRoaXMudXNlci5oZWFkUGljID0gaW5mby5maWxlLnJlc3BvbnNlLmRhdGEuc3JjOwoJCQl9CgkJfSwKCQliZWZvcmVVcGxvYWQoZmlsZSkgewoJCQljb25zdCBpc0pwZ09yUG5nID0gZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZycgfHwgZmlsZS50eXBlID09PSAnaW1hZ2UvcG5nJzsKCQkJaWYgKCFpc0pwZ09yUG5nKSB7CgkJCQl0aGlzLiRtZXNzYWdlLmVycm9yKCdZb3UgY2FuIG9ubHkgdXBsb2FkIEpQRyBmaWxlIScpOwoJCQl9CgkJCWNvbnN0IGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMjsKCQkJaWYgKCFpc0x0Mk0pIHsKCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoJ0ltYWdlIG11c3Qgc21hbGxlciB0aGFuIDJNQiEnKTsKCQkJfQoJCQlyZXR1cm4gaXNKcGdPclBuZyAmJiBpc0x0Mk07CgkJfSwKCX0sCn07Cg=="},{"version":3,"sources":["UserInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserInfo.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div style=\"display: flex; justify-content: center; align-items: center;  height: 100vh;\">\r\n\t\t<div style=\"display: flex; justify-content: space-around\">\r\n\t\t\t<div style=\"margin-top: -100px;\">\r\n\t\t\t\t<a-form-model :model=\"user\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\" style=\"width: 500px\">\r\n\t\t\t\t\t<a-form-model-item style=\"display: flex; justify-content: center; margin: 0 0 -5px 80px;\">\r\n\t\t\t\t\t\t<a-upload name=\"file\" list-type=\"picture-card\" class=\"avatar-uploader\" :show-upload-list=\"false\" :action=\"this.$store.state.requestPath + 'uploadHeadPic'\"\r\n\t\t\t\t\t\t :before-upload=\"beforeUpload\" @change=\"handleChange\">\r\n\t\t\t\t\t\t\t<a-avatar :size=\"100\" v-if=\"imageUrl\" :src=\"requestPath + 'userpic/' + imageUrl\" />\r\n\t\t\t\t\t\t\t<!-- <img v-if=\"imageUrl\" :src=\"requestPath + 'userpic/' + imageUrl\" alt=\"avatar\" style=\"border-radius: 50%; width: 128px; height: 128px;\" /> -->\r\n\t\t\t\t\t\t\t<div v-else>\r\n\t\t\t\t\t\t\t\t<a-icon :type=\"loading ? 'loading' : 'plus'\" />\r\n\t\t\t\t\t\t\t\t<div class=\"ant-upload-text\">\r\n\t\t\t\t\t\t\t\t\t修改\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</a-upload>\r\n\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t<a-form-model-item label=\"用户名\">\r\n\t\t\t\t\t\t<a-input v-model=\"user.name\" disabled />\r\n\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t<!-- \r\n\t\t\t\t\t<a-form-model-item label=\"密码\">\r\n\t\t\t\t\t\t<a-input v-model=\"user.password\" />\r\n\t\t\t\t\t</a-form-model-item> -->\r\n\t\t\t\t\t<a-form-model-item label=\"性别\">\r\n\t\t\t\t\t\t<a-radio-group v-model=\"user.gender\">\r\n\t\t\t\t\t\t\t<a-radio value=\"M\">\r\n\t\t\t\t\t\t\t\t男\r\n\t\t\t\t\t\t\t</a-radio>\r\n\t\t\t\t\t\t\t<a-radio value=\"F\">\r\n\t\t\t\t\t\t\t\t女\r\n\t\t\t\t\t\t\t</a-radio>\r\n\t\t\t\t\t\t</a-radio-group>\r\n\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t<a-form-model-item label=\"年龄段\">\r\n\t\t\t\t\t\t<a-select v-model=\"user.age\" placeholder=\"please select your zone\">\r\n\t\t\t\t\t\t\t<a-select-option value=1>\r\n\t\t\t\t\t\t\t\tUnder 18\r\n\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t<a-select-option value=18>\r\n\t\t\t\t\t\t\t\t18-24\r\n\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t<a-select-option value=25>\r\n\t\t\t\t\t\t\t\t25-34\r\n\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t<a-select-option value=35>\r\n\t\t\t\t\t\t\t\t35-44\r\n\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t<a-select-option value=45>\r\n\t\t\t\t\t\t\t\t45-49\r\n\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t<a-select-option value=50>\r\n\t\t\t\t\t\t\t\t50-55\r\n\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t<a-select-option value=56>\r\n\t\t\t\t\t\t\t\t56+\r\n\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t<a-form-model-item label=\"职业\">\r\n\t\t\t\t\t\t<a-select v-model=\"user.occupation\" placeholder=\"please select your zone\">\r\n\t\t\t\t\t\t\t<a-select-option :value=index v-for=\"(item, index) in occupationList\">\r\n\t\t\t\t\t\t\t\t{{item}}\r\n\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t<a-form-model-item label=\"邮编\">\r\n\t\t\t\t\t\t<a-input v-model=\"user.zipCode\" />\r\n\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t<a-form-model-item style=\"display: flex; justify-content: space-around;\">\r\n\t\t\t\t\t\t<a-button type=\"primary\" @click=\"onSubmit\" :disabled=\"this.flag>0 ? false : true\">\r\n\t\t\t\t\t\t\t提交\r\n\t\t\t\t\t\t</a-button>\r\n\t\t\t\t\t\t<a-button style=\"margin-left: 20px;\" @click=\"onBack\">\r\n\t\t\t\t\t\t\t返回\r\n\t\t\t\t\t\t</a-button>\r\n\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t</a-form-model>\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from 'vuex'\r\n\r\n\tfunction getBase64(img, callback) {\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', () => callback(reader.result));\r\n\t\treader.readAsDataURL(img);\r\n\t}\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['userInfo', 'requestPath'])\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tflag: -1,\r\n\t\t\t\tlabelCol: {\r\n\t\t\t\t\tspan: 4\r\n\t\t\t\t},\r\n\t\t\t\twrapperCol: {\r\n\t\t\t\t\tspan: 14\r\n\t\t\t\t},\r\n\t\t\t\tuser: {\r\n\t\t\t\t\t\"name\": \"undefine\",\r\n\t\t\t\t\t\"password\": \"undefine\",\r\n\t\t\t\t\t\"gender\": \"undefine\",\r\n\t\t\t\t\t\"age\": null,\r\n\t\t\t\t\t\"occupation\": null,\r\n\t\t\t\t\t\"zipCode\": \"undefine\",\r\n\t\t\t\t\t\"headPic\": \"default.jpg\"\r\n\t\t\t\t},\r\n\t\t\t\toccupationList: ['other', 'academic/educator', 'artist', 'clerical/admin', 'college/grad student',\r\n\t\t\t\t\t'customer service', 'doctor/health care', 'executive/managerial', 'farmer', 'homemaker', 'K-12 student',\r\n\t\t\t\t\t'lawyer', 'programmer', 'retired', 'sales/marketing', 'scientist', 'self-employed',\r\n\t\t\t\t\t'technician/engineer', 'tradesman/craftsman', 'unemployed', 'writer'\r\n\t\t\t\t],\r\n\t\t\t\tloading: false,\r\n\t\t\t\timageUrl: '',\r\n\t\t\t};\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tuser: {\r\n\t\t\t\thandler: function(val, oldval) {\r\n\t\t\t\t\tthis.flag = this.flag + 1;\r\n\t\t\t\t},\r\n\t\t\t\tdeep: true //对象内部的属性监听，也叫深度监听\r\n\t\t\t},\r\n\t\t},\r\n\t\tasync created() {\r\n\t\t\tObject.assign(this.user, this.userInfo);\r\n\t\t\tthis.imageUrl = this.user.headPic;\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations(['updateUserInfo']),\r\n\t\t\tasync userUpdate() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.axios.post(this.requestPath + 'userUpdate/', this.user);\r\n\t\t\t\tif (data.code == 0) {\r\n\t\t\t\t\tthis.$message.success(' (｡･∀･)ﾉﾞ 修改成功~ ', 1);\r\n\t\t\t\t\tthis.updateUserInfo(this.user);  // 更新全局数据\r\n\t\t\t\t\tthis.onBack();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error(' (￣△￣；) 出错啦~ ', 2);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync onSubmit() {\r\n\t\t\t\tif (this.flag > 0 && this.userInfo) {\r\n\t\t\t\t\tthis.userUpdate();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonBack() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/home'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleChange(info) {\r\n\t\t\t\tif (info.file.status === 'uploading') {\r\n\t\t\t\t\tthis.loading = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (info.file.status === 'done') {\r\n\t\t\t\t\tgetBase64(info.file.originFileObj, imageUrl => {\r\n\t\t\t\t\t\tthis.imageUrl = imageUrl;\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.user.headPic = info.file.response.data.src;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbeforeUpload(file) {\r\n\t\t\t\tconst isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n\t\t\t\tif (!isJpgOrPng) {\r\n\t\t\t\t\tthis.$message.error('You can only upload JPG file!');\r\n\t\t\t\t}\r\n\t\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\r\n\t\t\t\tif (!isLt2M) {\r\n\t\t\t\t\tthis.$message.error('Image must smaller than 2MB!');\r\n\t\t\t\t}\r\n\t\t\t\treturn isJpgOrPng && isLt2M;\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.avatar-uploader>.ant-upload {\r\n\t\twidth: 25px;\r\n\t\theight: 25px;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.ant-upload-select-picture-card i {\r\n\t\tfont-size: 16;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.ant-upload-select-picture-card .ant-upload-text {\r\n\t\tmargin-top: 8px;\r\n\t\tcolor: #666;\r\n\t}\r\n</style>\n"]}]}