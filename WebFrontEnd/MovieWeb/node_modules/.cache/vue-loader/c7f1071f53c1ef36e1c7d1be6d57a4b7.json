{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\AdminInfo.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\AdminInfo.vue","mtime":1617100728695},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYWRtaW4taW5mbyB7CgltYXJnaW4tbGVmdDogMzBweDsKCXdpZHRoOiAyMDBweDsKfQoKLnBvc3Rlci11cGxvYWRlci1hZG1pbkluZm8+LmFudC11cGxvYWQgewoJYm9yZGVyLXJhZGl1czogNTAlOwp9CgouYW50LXVwbG9hZC1zZWxlY3QtcGljdHVyZS1jYXJkIGkgewoJZm9udC1zaXplOiAxNjsKCWNvbG9yOiAjOTk5Owp9CgouYW50LXVwbG9hZC1zZWxlY3QtcGljdHVyZS1jYXJkIC5hbnQtdXBsb2FkLXRleHQgewoJbWFyZ2luLXRvcDogOHB4OwoJY29sb3I6ICM2NjY7Cn0K"},{"version":3,"sources":["AdminInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"AdminInfo.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<a-modal title=\"我的资料\" :visible=\"visible\" :confirm-loading=\"confirmLoading\" @ok=\"handleOk\" @cancel=\"handleCancel\"\r\n\t\t @afterClose=\"handleCancel\">\r\n\t\t\t<a-form-model :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\r\n\t\t\t\t<div style=\"display: flex; justify-content: space-around;\">\r\n\t\t\t\t\t<a-form-model-item  label=\"\">\r\n\t\t\t\t\t\t<a-upload name=\"file\" list-type=\"picture-card\" class=\"poster-uploader-adminInfo\" :show-upload-list=\"false\" :action=\"this.$store.state.requestPath + 'uploadHeadPic'\"\r\n\t\t\t\t\t\t :before-upload=\"beforeUpload\" @change=\"handleChange\">\r\n\t\t\t\t\t\t\t<a-avatar v-if=\"imageUrl\" :size=100 :src=\"imageUrl\"/>\r\n\t\t\t\t\t\t\t<!-- <img v-if=\"imageUrl\" :src=\"imageUrl\" style=\"width: 100px; height: 100px;\" /> -->\r\n\t\t\t\t\t\t\t<div v-else>\r\n\t\t\t\t\t\t\t\t<a-icon :type=\"picloading ? 'loading' : 'plus'\" />\r\n\t\t\t\t\t\t\t\t<div class=\"ant-upload-text\">\r\n\t\t\t\t\t\t\t\t\t上传\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</a-upload>\r\n\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<a-form-model-item label=\"用户名\">\r\n\t\t\t\t\t\t\t<a-input v-model=\"record.name\" :disabled=\"true\" class=\"admin-info\" />\r\n\t\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t\t<a-form-model-item label=\"邮箱\">\r\n\t\t\t\t\t\t\t<a-input v-model=\"record.email\" :disabled=\"!modify\" class=\"admin-info\" />\r\n\t\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t\t<a-form-model-item label=\"修改开关\">\r\n\t\t\t\t\t\t\t<a-switch v-model=\"modify\" style=\"margin-left: 30px;\" />\r\n\t\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</a-form-model>\r\n\t\t</a-modal>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from 'vuex';\r\n\tfunction getBase64(img, callback) {\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', () => callback(reader.result));\r\n\t\treader.readAsDataURL(img);\r\n\t};\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['userInfo', 'requestPath', 'picRequestPath'])\r\n\t\t},\r\n\t\tprops: ['info', 'uid'],\r\n\t\tasync created() {\r\n\t\t\tthis.visible = this.info;\r\n\t\t\tlet {\r\n\t\t\t\tdata\r\n\t\t\t} = await this.$get(this.$store.state.requestPath + 'admin/search/' + this.uid);\r\n\t\t\tthis.record = data.data;\r\n\t\t\tthis.imageUrl = this.picRequestPath + 'headpic/' + this.record.headPic;\r\n\t\t\tthis.latestImageUrl = this.imageUrl;\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tlabelCol: {\r\n\t\t\t\t\tspan: 4\r\n\t\t\t\t},\r\n\t\t\t\twrapperCol: {\r\n\t\t\t\t\tspan: 14\r\n\t\t\t\t},\r\n\t\t\t\tlabelCol: {\r\n\t\t\t\t\tspan: 4\r\n\t\t\t\t},\r\n\t\t\t\twrapperCol: {\r\n\t\t\t\t\tspan: 14\r\n\t\t\t\t},\r\n\t\t\t\tpicloading: false,\r\n\t\t\t\tmodify: false,\r\n\t\t\t\tvisible: false,\r\n\t\t\t\timageUrl: '',\r\n\t\t\t\tlatestImageUrl: null,\r\n\t\t\t\tconfirmLoading: false,\r\n\t\t\t\trecord: {\r\n\t\t\t\t\tuid: this.uid,\r\n\t\t\t\t\tname: null,\r\n\t\t\t\t\temail: null,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync handleOk(e) {\r\n\t\t\t\tthis.confirmLoading = true;\r\n\t\t\t\tif(this.modify){\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t} = await this.axios.post(this.$store.state.requestPath + 'admin/update' , this.record);\r\n\t\t\t\t\tif(data.code == 0){\r\n\t\t\t\t\t\tthis.$message.success(\"修改成功\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$message.error(\"修改失败\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.visible = false;\r\n\t\t\t\t\tthis.$emit(\"closeInfoWindow\");\r\n\t\t\t\t\tthis.confirmLoading = false;\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\thandleCancel() {\r\n\t\t\t\tthis.modify = false;\r\n\t\t\t\tthis.record.headPic = this.latestImageUrl;\r\n\t\t\t\tthis.imageUrl = this.latestImageUrl;\r\n\t\t\t\tthis.visible = false;\r\n\t\t\t\tthis.$emit(\"closeInfoWindow\")\r\n\t\t\t},\r\n\t\t\thandleChange(info) {\r\n\t\t\t\tif (info.file.status === 'uploading') {\r\n\t\t\t\t\tthis.picloading = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (info.file.status === 'done') {\r\n\t\t\t\t\t// 从前端获取上传的 img-url\r\n\t\t\t\t\tgetBase64(info.file.originFileObj, imageUrl => {\r\n\t\t\t\t\t\tthis.imageUrl = imageUrl;\r\n\t\t\t\t\t\tthis.picloading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.record.headPic = info.file.response.data.src;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbeforeUpload(file) {\r\n\t\t\t\tconst isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n\t\t\t\tif (!isJpgOrPng) {\r\n\t\t\t\t\tthis.$message.error('You can only upload JPG file!');\r\n\t\t\t\t}\r\n\t\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\r\n\t\t\t\tif (!isLt2M) {\r\n\t\t\t\t\tthis.$message.error('Image must smaller than 2MB!');\r\n\t\t\t\t}\r\n\t\t\t\treturn isJpgOrPng && isLt2M;\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.admin-info {\r\n\t\tmargin-left: 30px;\r\n\t\twidth: 200px;\r\n\t}\r\n\r\n\t.poster-uploader-adminInfo>.ant-upload {\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.ant-upload-select-picture-card i {\r\n\t\tfont-size: 16;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.ant-upload-select-picture-card .ant-upload-text {\r\n\t\tmargin-top: 8px;\r\n\t\tcolor: #666;\r\n\t}\r\n</style>\n"]}]}