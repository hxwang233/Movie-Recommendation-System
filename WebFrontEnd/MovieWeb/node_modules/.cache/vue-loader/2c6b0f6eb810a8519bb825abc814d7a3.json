{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\CarouselList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\CarouselList.vue","mtime":1617009316575},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CgltYXBNdXRhdGlvbnMsCgltYXBTdGF0ZQp9IGZyb20gJ3Z1ZXgnOwoKZnVuY3Rpb24gZ2V0QmFzZTY0KGZpbGUpIHsKCXJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgkJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQlyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKCQlyZWFkZXIub25sb2FkID0gKCkgPT4gcmVzb2x2ZShyZWFkZXIucmVzdWx0KTsKCQlyZWFkZXIub25lcnJvciA9IGVycm9yID0+IHJlamVjdChlcnJvcik7Cgl9KTsKfQpleHBvcnQgZGVmYXVsdCB7Cglhc3luYyBjcmVhdGVkKCkgewoJCXRoaXMuZ2V0Q2Fyb3VzZWwoKTsKCX0sCgljb21wdXRlZDogewoJCS4uLm1hcFN0YXRlKFsndXNlckluZm8nLCAncmVxdWVzdFBhdGgnLCAncGljUmVxdWVzdFBhdGgnXSkKCX0sCglkYXRhKCkgewoJCXJldHVybiB7CgkJCXByZXZpZXdWaXNpYmxlOiBmYWxzZSwKCQkJcHJldmlld0ltYWdlOiAnJywKCQkJZmlsZUxpc3Q6IFtdLAoJCX07Cgl9LAoJd2F0Y2g6IHsKCQlmaWxlTGlzdDogYXN5bmMgZnVuY3Rpb24oZGF0YSkgewoJCQl0aGlzLmdldENhcm91c2VsKCk7CgkJfQoJfSwKCW1ldGhvZHM6IHsKCQlhc3luYyBnZXRDYXJvdXNlbCgpewoJCQlsZXQgewoJCQkJZGF0YQoJCQl9ID0gYXdhaXQgdGhpcy4kZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLnJlcXVlc3RQYXRoICsgJy9hZG1pbi9nZXRDYXJvdXNlbCcpOwoJCQlsZXQgZmlsZW5hbWUgPSBkYXRhLmRhdGE7CgkJCXRoaXMuZmlsZUxpc3QgPSBbXTsKCQkJZm9yKHZhciBpPTA7IGk8ZmlsZW5hbWUubGVuZ3RoOyBpKyspewoJCQkJbGV0IGZpbGUgPSB7dWlkOi0oaSsxKSwgbmFtZTpmaWxlbmFtZVtpXSwgc3RhdHVzOidkb25lJywndXJsJzogdGhpcy5waWNSZXF1ZXN0UGF0aCsnY2Fyb3VzZWwvJytmaWxlbmFtZVtpXX07CgkJCQl0aGlzLmZpbGVMaXN0LnB1c2goZmlsZSk7CgkJCX0KCQl9LAoJCWhhbmRsZUNhbmNlbCgpIHsKCQkJdGhpcy5wcmV2aWV3VmlzaWJsZSA9IGZhbHNlOwoJCX0sCgkJYXN5bmMgaGFuZGxlUHJldmlldyhmaWxlKSB7CgkJCWlmICghZmlsZS51cmwgJiYgIWZpbGUucHJldmlldykgewoJCQkJZmlsZS5wcmV2aWV3ID0gYXdhaXQgZ2V0QmFzZTY0KGZpbGUub3JpZ2luRmlsZU9iaik7CgkJCX0KCQkJdGhpcy5wcmV2aWV3SW1hZ2UgPSBmaWxlLnVybCB8fCBmaWxlLnByZXZpZXc7CgkJCXRoaXMucHJldmlld1Zpc2libGUgPSB0cnVlOwoJCX0sCgkJaGFuZGxlQ2hhbmdlKHsKCQkJZmlsZUxpc3QKCQl9KSB7CgkJCXRoaXMuZmlsZUxpc3QgPSBmaWxlTGlzdDsKCQl9LAoJCWFzeW5jIGhhbmRsZVJlbW92ZShmaWxlKXsKCQkJbGV0IHsKCQkJCWRhdGEKCQkJfSA9IGF3YWl0IHRoaXMuJGdldCh0aGlzLiRzdG9yZS5zdGF0ZS5yZXF1ZXN0UGF0aCArICcvYWRtaW4vZGVsQ2Fyb3VzZWwvJyArIGZpbGUubmFtZSk7CgkJCWlmKGRhdGEuY29kZSA9PSAwKXsKCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7CgkJCX1lbHNlewoJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcign5Yig6Zmk5aSx6LSlJyk7CgkJCX0KCQl9Cgl9LAp9Owo="},{"version":3,"sources":["CarouselList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CarouselList.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n\t<div style=\"margin:5px 0 0 10px;\">\r\n\t\t<a-upload :action=\"this.$store.state.requestPath + 'uploadCarousel'\" list-type=\"picture-card\" :file-list=\"fileList\"\r\n\t\t @preview=\"handlePreview\" @change=\"handleChange\" :remove=\"handleRemove\">\r\n\t\t\t<div v-if=\"fileList.length < 4\">\r\n\t\t\t\t<div class=\"ant-upload-text\">\r\n\t\t\t\t\t<a-icon type=\"plus\"></a-icon>\r\n\t\t\t\t\t<div>上传</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</a-upload>\r\n\t\t<a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancel\">\r\n\t\t\t<img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\r\n\t\t</a-modal>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from 'vuex';\r\n\r\n\tfunction getBase64(file) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.readAsDataURL(file);\r\n\t\t\treader.onload = () => resolve(reader.result);\r\n\t\t\treader.onerror = error => reject(error);\r\n\t\t});\r\n\t}\r\n\texport default {\r\n\t\tasync created() {\r\n\t\t\tthis.getCarousel();\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['userInfo', 'requestPath', 'picRequestPath'])\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpreviewVisible: false,\r\n\t\t\t\tpreviewImage: '',\r\n\t\t\t\tfileList: [],\r\n\t\t\t};\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tfileList: async function(data) {\r\n\t\t\t\tthis.getCarousel();\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync getCarousel(){\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + '/admin/getCarousel');\r\n\t\t\t\tlet filename = data.data;\r\n\t\t\t\tthis.fileList = [];\r\n\t\t\t\tfor(var i=0; i<filename.length; i++){\r\n\t\t\t\t\tlet file = {uid:-(i+1), name:filename[i], status:'done','url': this.picRequestPath+'carousel/'+filename[i]};\r\n\t\t\t\t\tthis.fileList.push(file);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleCancel() {\r\n\t\t\t\tthis.previewVisible = false;\r\n\t\t\t},\r\n\t\t\tasync handlePreview(file) {\r\n\t\t\t\tif (!file.url && !file.preview) {\r\n\t\t\t\t\tfile.preview = await getBase64(file.originFileObj);\r\n\t\t\t\t}\r\n\t\t\t\tthis.previewImage = file.url || file.preview;\r\n\t\t\t\tthis.previewVisible = true;\r\n\t\t\t},\r\n\t\t\thandleChange({\r\n\t\t\t\tfileList\r\n\t\t\t}) {\r\n\t\t\t\tthis.fileList = fileList;\r\n\t\t\t},\r\n\t\t\tasync handleRemove(file){\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + '/admin/delCarousel/' + file.name);\r\n\t\t\t\tif(data.code == 0){\r\n\t\t\t\t\tthis.$message.success('删除成功');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$message.error('删除失败');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>\r\n<style lang=\"scss\">\r\n\r\n\t.ant-upload-list-picture-card-container {\r\n\t\tfloat: left;\r\n \t\twidth: 600px;\r\n\t\theight: 280px;\r\n\t\tmargin: 0 8px 8px 0 \r\n\t}\r\n\r\n\t.ant-upload-list-picture-card .ant-upload-list-item {\r\n\t\tfloat: left;\r\n\t\twidth: 600px;\r\n\t\theight: 280px;\r\n\t\tmargin: 0 15px 15px 0;\r\n\t}\r\n\r\n\t.ant-upload-select-picture-card i {\r\n\t\twidth: 580px;\r\n\t\theight: 235px;\r\n\t\tfont-size: 32px;\r\n\t\tmargin-bottom: -80px;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.ant-upload-select-picture-card .ant-upload-text {\r\n\t\tfont-size: 32px;\r\n\t\tmargin-top: 50px;\r\n\t\tcolor: #666;\r\n\t}\r\n</style>\n"]}]}