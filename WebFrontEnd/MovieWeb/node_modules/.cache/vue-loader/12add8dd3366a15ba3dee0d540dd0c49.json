{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\MovieAddPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\MovieAddPage.vue","mtime":1614249261552},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CgltYXBNdXRhdGlvbnMsCgltYXBTdGF0ZQp9IGZyb20gJ3Z1ZXgnCgpmdW5jdGlvbiBnZXRCYXNlNjQoaW1nLCBjYWxsYmFjaykgewoJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCXJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gY2FsbGJhY2socmVhZGVyLnJlc3VsdCkpOwoJcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1nKTsKfTsKZXhwb3J0IGRlZmF1bHQgewoJY29tcHV0ZWQ6IHsKCQkuLi5tYXBTdGF0ZShbJ3VzZXJJbmZvJywgJ3JlcXVlc3RQYXRoJ10pCgl9LAoJcHJvcHM6IFsndmlzaWJsZSddLAoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQlmb3JtOiB0aGlzLiRmb3JtLmNyZWF0ZUZvcm0odGhpcyksCgkJCWxhYmVsQ29sOiB7CgkJCQlzcGFuOiA0CgkJCX0sCgkJCXdyYXBwZXJDb2w6IHsKCQkJCXNwYW46IDE0CgkJCX0sCgkJCWltYWdlVXJsOiAnJywKCQkJbmV3Um93OiB7CgkJCQkibWlkIjogbnVsbCwKCQkJCSJuYW1lIjogbnVsbCwKCQkJCSJnZW5yZSI6IG51bGwsCgkJCQkicmVsZWFzZVRpbWUiOiBudWxsLAoJCQkJImRpcmVjdG9ycyI6IG51bGwsCgkJCX0sCgkJCW1vdmllOiB7CgkJCQkibmFtZSI6ICJ1bmRlZmluZSIsCgkJCQkicGxheVRpbWUiOiAidW5kZWZpbmUiLAoJCQkJInJlbGVhc2VUaW1lIjogInVuZGVmaW5lIiwKCQkJCSJnZW5yZSI6ICJ1bmRlZmluZSIsCgkJCQkiZGlyZWN0b3JzIjogInVuZGVmaW5lIiwKCQkJCSJ3cml0ZXJzIjogInVuZGVmaW5lIiwKCQkJCSJzdGFycyI6ICJ1bmRlZmluZSIsCgkJCQkiaW50cm8iOiBudWxsLAoJCQkJInBpYyI6ICJkZWZhdWx0LmpwZyIKCQkJfSwKCQkJcGljbG9hZGluZzogZmFsc2UsCgkJCWJ1dHRvbmxvYWRpbmc6IGZhbHNlLAoJCQlnZW5yZUxpc3Q6IFsn5Yqo5L2cJywgJ+WGkumZqScsICfliqjnlLsnLCAn5YS/56ulJywgJ+WWnOWJpycsICfniq/nvaonLCAn57qq5b2VJywgJ+aIj+WJpycsCgkJCQkn5bm75oOzJywgJ+m7keiJsicsICfmgZDmgJYnLCAn6Z+z5LmQJywgJ+elnuenmCcsICfmtarmvKsnLCAn56eR5bm7JywgJ+aDiuaCmicsICfmiJjkuoknLCAn6KW/6YOoJywgJ+WFtuS7licKCQkJXSwKCQl9OwoJfSwKCW1ldGhvZHM6IHsKCQlvbkNoYW5nZShkYXRlLCBkYXRlU3RyaW5nKSB7CgkJCXRoaXMubW92aWUucmVsZWFzZVRpbWUgPSBkYXRlU3RyaW5nOwoJCX0sCgkJYXN5bmMgaGFuZGxlT2soZSkgewkKCQkJdGhpcy5mb3JtLnZhbGlkYXRlRmllbGRzKGFzeW5jIChlcnIsIHZhbHVlcykgPT4gewoJCQkJaWYgKCFlcnIpIHsKCQkJCQl0aGlzLm1vdmllLm5hbWUgPSB2YWx1ZXMubmFtZTsKCQkJCQl0aGlzLm1vdmllLnBsYXlUaW1lID0gdmFsdWVzLnBsYXlUaW1lOwoJCQkJCXRoaXMubW92aWUuZ2VucmUgPSB2YWx1ZXMuZ2VucmU7CgkJCQkJdGhpcy5tb3ZpZS5pbnRybyA9IHZhbHVlcy5pbnRybzsKCQkJCQl0aGlzLm1vdmllLmRpcmVjdG9ycyA9IHZhbHVlcy5kaXJlY3RvcnM7CgkJCQkJdGhpcy5tb3ZpZS53cml0ZXJzID0gdmFsdWVzLndyaXRlcnM7CgkJCQkJdGhpcy5tb3ZpZS5zdGFycyA9IHZhbHVlcy5zdGFyczsKCQkJCQljb25zb2xlLmxvZyh0aGlzLm1vdmllKTsKCQkJCQlsZXQgewoJCQkJCQlkYXRhCgkJCQkJfSA9IGF3YWl0IHRoaXMuYXhpb3MucG9zdCh0aGlzLnJlcXVlc3RQYXRoICsgJ2FkZE1vdmllJywgdGhpcy5tb3ZpZSk7CgkJCQkJaWYgKGRhdGEuY29kZSA9PSAwKSB7CgkJCQkJCXRoaXMubmV3Um93Lm1pZCA9IGRhdGEuZGF0YTsKCQkJCQkJdGhpcy5uZXdSb3cubmFtZSA9IHRoaXMubW92aWUubmFtZTsKCQkJCQkJdGhpcy5uZXdSb3cuZ2VucmUgPSBbXTsKCQkJCQkJZm9yICh2YXIgaT0wOyBpPHRoaXMubW92aWUuZ2VucmUubGVuZ3RoOyBpKyspewoJCQkJCQkJdGhpcy5uZXdSb3cuZ2VucmUucHVzaCh0aGlzLmdlbnJlTGlzdFt0aGlzLm1vdmllLmdlbnJlW2ldXSk7CgkJCQkJCX0KCQkJCQkJdGhpcy5uZXdSb3cucmVsZWFzZVRpbWUgPSB0aGlzLm1vdmllLnJlbGVhc2VUaW1lOwoJCQkJCQl0aGlzLm5ld1Jvdy5kaXJlY3RvcnMgPSB0aGlzLm1vdmllLmRpcmVjdG9yczsKCQkJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmt7vliqDmiJDlip8nKTsKCQkJCQkJdGhpcy4kZW1pdCgndXBkYXRlRGF0YVNvdXJjZScsIHRoaXMubmV3Um93KTsKCQkJCQl9ZWxzZXsKCQkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcign5re75Yqg5aSx6LSlJyk7CgkJCQkJfQoJCQkJfQoJCQl9KTsJCgkJCXRoaXMuYnV0dG9ubG9hZGluZyA9IHRydWU7CgkJCXNldFRpbWVvdXQoKCkgPT4gewoJCQkJdGhpcy4kZW1pdCgndXBkYXRlUG9wV2luU3RhdGUnLCBmYWxzZSk7CgkJCQl0aGlzLmJ1dHRvbmxvYWRpbmcgPSBmYWxzZTsKCQkJfSwgMjAwMCk7CgkJfSwKCQloYW5kbGVDYW5jZWwoZSkgewoJCQl0aGlzLmltYWdlVXJsID0gbnVsbDsKCQkJdGhpcy4kZW1pdCgndXBkYXRlUG9wV2luU3RhdGUnLCBmYWxzZSk7CgkJfSwKCQloYW5kbGVDaGFuZ2UoaW5mbykgewoJCQlpZiAoaW5mby5maWxlLnN0YXR1cyA9PT0gJ3VwbG9hZGluZycpIHsKCQkJCXRoaXMucGljbG9hZGluZyA9IHRydWU7CgkJCQlyZXR1cm47CgkJCX0KCQkJaWYgKGluZm8uZmlsZS5zdGF0dXMgPT09ICdkb25lJykgewoJCQkJLy8g5LuO5YmN56uv6I635Y+W5LiK5Lyg55qEIGltZy11cmwKCQkJCWdldEJhc2U2NChpbmZvLmZpbGUub3JpZ2luRmlsZU9iaiwgaW1hZ2VVcmwgPT4gewoJCQkJCXRoaXMuaW1hZ2VVcmwgPSBpbWFnZVVybDsKCQkJCQl0aGlzLnBpY2xvYWRpbmcgPSBmYWxzZTsKCQkJCX0pOwoJCQkJdGhpcy5tb3ZpZS5waWMgPSBpbmZvLmZpbGUucmVzcG9uc2UuZGF0YS5zcmM7CgkJCX0KCQl9LAoJCWJlZm9yZVVwbG9hZChmaWxlKSB7CgkJCWNvbnN0IGlzSnBnT3JQbmcgPSBmaWxlLnR5cGUgPT09ICdpbWFnZS9qcGVnJyB8fCBmaWxlLnR5cGUgPT09ICdpbWFnZS9wbmcnOwoJCQlpZiAoIWlzSnBnT3JQbmcpIHsKCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoJ1lvdSBjYW4gb25seSB1cGxvYWQgSlBHIGZpbGUhJyk7CgkJCX0KCQkJY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwoJCQlpZiAoIWlzTHQyTSkgewoJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcignSW1hZ2UgbXVzdCBzbWFsbGVyIHRoYW4gMk1CIScpOwoJCQl9CgkJCXJldHVybiBpc0pwZ09yUG5nICYmIGlzTHQyTTsKCQl9LAoJfSwKfQo="},{"version":3,"sources":["MovieAddPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MovieAddPage.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n\t<a-modal v-model=\"visible\" title=\"编辑新电影\" on-ok=\"handleOk\" :afterClose=\"handleCancel\" width=\"800px\" :dialog-style=\"{ top: '15px' }\">\r\n\t\t<template slot=\"footer\">\r\n\t\t\t<a-button key=\"back\" @click=\"handleCancel\">\r\n\t\t\t\t取消\r\n\t\t\t</a-button>\r\n\t\t\t<a-button key=\"submit\" type=\"primary\" :loading=\"buttonloading\" @click=\"handleOk\">\r\n\t\t\t\t提交\r\n\t\t\t</a-button>\r\n\t\t</template>\r\n\t\t<div>\r\n\t\t\t<a-form :form=\"form\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\" hide-required-mark>\r\n\t\t\t\t<div style=\"margin-top: -10px; display: flex; justify-content: space-around;\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<a-form-item label=\"电影名\">\r\n\t\t\t\t\t\t\t<a-input class=\"inputFieldStyle\" v-decorator=\"['name', {rules: [\r\n\t\t\t\t\t\t\t\t{ required: true, message: '    电影名不能为空' }],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t placeholder=\"请输入电影名\" />\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t<a-form-item label=\"导演\">\r\n\t\t\t\t\t\t\t<a-input class=\"inputFieldStyle\" v-decorator=\"['directors', {rules: [\r\n\t\t\t\t\t\t\t\t{ required: true, message: '导演不能为空' }],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t placeholder=\"请输入导演\" />\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t<a-form-item label=\"编剧\">\r\n\t\t\t\t\t\t\t<a-input class=\"inputFieldStyle\" v-decorator=\"['writers', {rules: [\r\n\t\t\t\t\t\t\t\t{ required: true, message: '编剧不能为空' }],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t placeholder=\"请输入编剧\" />\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t<a-form-item label=\"演员\">\r\n\t\t\t\t\t\t\t<a-input class=\"inputFieldStyle\" v-decorator=\"['stars', {rules: [\r\n\t\t\t\t\t\t\t\t{ required: true, message: '演员不能为空' }],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t placeholder=\"请输入演员\" />\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t<a-form-item label=\"播放时长\">\r\n\t\t\t\t\t\t\t<a-input class=\"inputFieldStyle\" v-decorator=\"['playTime', {rules: [\r\n\t\t\t\t\t\t\t\t{ required: true, message: '播放时长不能为空' }],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t placeholder=\"请输入片长\" />\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t<a-form-item label=\"发行时间\">\r\n\t\t\t\t\t\t\t<a-date-picker type=\"date\" class=\"inputFieldStyle\" v-decorator=\"['releaseTime', {rules: [{ required: true, message: '请选择发行时间' }],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t placeholder=\"选择一个日期\"  @change=\"onChange\"/>\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<a-form-item>\r\n\t\t\t\t\t\t<a-upload name=\"file\" list-type=\"picture-card\" class=\"poster-uploader\" :show-upload-list=\"false\" :action=\"this.$store.state.requestPath + 'uploadMoviePoster'\"\r\n\t\t\t\t\t\t :before-upload=\"beforeUpload\" @change=\"handleChange\">\r\n\t\t\t\t\t\t\t<img v-if=\"imageUrl\" :src=\"imageUrl\" style=\"width: 200px; height: 300px;\" />\r\n\t\t\t\t\t\t\t<div v-else>\r\n\t\t\t\t\t\t\t\t<a-icon :type=\"picloading ? 'loading' : 'plus'\" />\r\n\t\t\t\t\t\t\t\t<div class=\"ant-upload-text\">\r\n\t\t\t\t\t\t\t\t\t上传\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</a-upload>\r\n\t\t\t\t\t</a-form-item>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"margin: 10px 0 0 -30px;\">\r\n\t\t\t\t\t<a-form-item label=\"类别\">\r\n\t\t\t\t\t\t<a-checkbox-group v-decorator=\"['genre']\" style=\"margin-left:20px;width: 80%;\">\r\n\t\t\t\t\t\t\t<a-checkbox :value=\"index\" :name=\"item\" v-for=\"(item, index) in genreList\" style=\"vertical-align:middle;\">\r\n\t\t\t\t\t\t\t\t{{item}}\r\n\t\t\t\t\t\t\t</a-checkbox>\r\n\t\t\t\t\t\t</a-checkbox-group>\r\n\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t<a-form-item label=\"介绍\">\r\n\t\t\t\t\t\t<a-input type=\"textarea\" style=\"margin-left: 10px;\" v-decorator=\"['intro', {rules: [\r\n\t\t\t\t\t\t\t\t{ required: true, message: '电影介绍不能为空' }],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t placeholder=\"请输入简介\" />\r\n\t\t\t\t\t</a-form-item>\r\n\t\t\t\t</div>\r\n\t\t\t</a-form>\r\n\t\t</div>\r\n\t</a-modal>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from 'vuex'\r\n\r\n\tfunction getBase64(img, callback) {\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', () => callback(reader.result));\r\n\t\treader.readAsDataURL(img);\r\n\t};\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['userInfo', 'requestPath'])\r\n\t\t},\r\n\t\tprops: ['visible'],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tform: this.$form.createForm(this),\r\n\t\t\t\tlabelCol: {\r\n\t\t\t\t\tspan: 4\r\n\t\t\t\t},\r\n\t\t\t\twrapperCol: {\r\n\t\t\t\t\tspan: 14\r\n\t\t\t\t},\r\n\t\t\t\timageUrl: '',\r\n\t\t\t\tnewRow: {\r\n\t\t\t\t\t\"mid\": null,\r\n\t\t\t\t\t\"name\": null,\r\n\t\t\t\t\t\"genre\": null,\r\n\t\t\t\t\t\"releaseTime\": null,\r\n\t\t\t\t\t\"directors\": null,\r\n\t\t\t\t},\r\n\t\t\t\tmovie: {\r\n\t\t\t\t\t\"name\": \"undefine\",\r\n\t\t\t\t\t\"playTime\": \"undefine\",\r\n\t\t\t\t\t\"releaseTime\": \"undefine\",\r\n\t\t\t\t\t\"genre\": \"undefine\",\r\n\t\t\t\t\t\"directors\": \"undefine\",\r\n\t\t\t\t\t\"writers\": \"undefine\",\r\n\t\t\t\t\t\"stars\": \"undefine\",\r\n\t\t\t\t\t\"intro\": null,\r\n\t\t\t\t\t\"pic\": \"default.jpg\"\r\n\t\t\t\t},\r\n\t\t\t\tpicloading: false,\r\n\t\t\t\tbuttonloading: false,\r\n\t\t\t\tgenreList: ['动作', '冒险', '动画', '儿童', '喜剧', '犯罪', '纪录', '戏剧',\r\n\t\t\t\t\t'幻想', '黑色', '恐怖', '音乐', '神秘', '浪漫', '科幻', '惊悚', '战争', '西部', '其他'\r\n\t\t\t\t],\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonChange(date, dateString) {\r\n\t\t\t\tthis.movie.releaseTime = dateString;\r\n\t\t\t},\r\n\t\t\tasync handleOk(e) {\t\r\n\t\t\t\tthis.form.validateFields(async (err, values) => {\r\n\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\tthis.movie.name = values.name;\r\n\t\t\t\t\t\tthis.movie.playTime = values.playTime;\r\n\t\t\t\t\t\tthis.movie.genre = values.genre;\r\n\t\t\t\t\t\tthis.movie.intro = values.intro;\r\n\t\t\t\t\t\tthis.movie.directors = values.directors;\r\n\t\t\t\t\t\tthis.movie.writers = values.writers;\r\n\t\t\t\t\t\tthis.movie.stars = values.stars;\r\n\t\t\t\t\t\tconsole.log(this.movie);\r\n\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\tdata\r\n\t\t\t\t\t\t} = await this.axios.post(this.requestPath + 'addMovie', this.movie);\r\n\t\t\t\t\t\tif (data.code == 0) {\r\n\t\t\t\t\t\t\tthis.newRow.mid = data.data;\r\n\t\t\t\t\t\t\tthis.newRow.name = this.movie.name;\r\n\t\t\t\t\t\t\tthis.newRow.genre = [];\r\n\t\t\t\t\t\t\tfor (var i=0; i<this.movie.genre.length; i++){\r\n\t\t\t\t\t\t\t\tthis.newRow.genre.push(this.genreList[this.movie.genre[i]]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.newRow.releaseTime = this.movie.releaseTime;\r\n\t\t\t\t\t\t\tthis.newRow.directors = this.movie.directors;\r\n\t\t\t\t\t\t\tthis.$message.success('添加成功');\r\n\t\t\t\t\t\t\tthis.$emit('updateDataSource', this.newRow);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.$message.error('添加失败');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\r\n\t\t\t\tthis.buttonloading = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.$emit('updatePopWinState', false);\r\n\t\t\t\t\tthis.buttonloading = false;\r\n\t\t\t\t}, 2000);\r\n\t\t\t},\r\n\t\t\thandleCancel(e) {\r\n\t\t\t\tthis.imageUrl = null;\r\n\t\t\t\tthis.$emit('updatePopWinState', false);\r\n\t\t\t},\r\n\t\t\thandleChange(info) {\r\n\t\t\t\tif (info.file.status === 'uploading') {\r\n\t\t\t\t\tthis.picloading = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (info.file.status === 'done') {\r\n\t\t\t\t\t// 从前端获取上传的 img-url\r\n\t\t\t\t\tgetBase64(info.file.originFileObj, imageUrl => {\r\n\t\t\t\t\t\tthis.imageUrl = imageUrl;\r\n\t\t\t\t\t\tthis.picloading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.movie.pic = info.file.response.data.src;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbeforeUpload(file) {\r\n\t\t\t\tconst isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n\t\t\t\tif (!isJpgOrPng) {\r\n\t\t\t\t\tthis.$message.error('You can only upload JPG file!');\r\n\t\t\t\t}\r\n\t\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\r\n\t\t\t\tif (!isLt2M) {\r\n\t\t\t\t\tthis.$message.error('Image must smaller than 2MB!');\r\n\t\t\t\t}\r\n\t\t\t\treturn isJpgOrPng && isLt2M;\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang='scss'>\r\n\t.inputFieldStyle {\r\n\t\twidth: 320px;\r\n\t}\r\n</style>\n"]}]}