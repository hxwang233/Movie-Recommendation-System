{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\CommentAddPage.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\CommentAddPage.vue","mtime":1614083787968},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmlucHV0RmllbGRTdHlsZSB7Cgl3aWR0aDogMzIwcHg7Cn0K"},{"version":3,"sources":["CommentAddPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqKA;AACA;AACA","file":"CommentAddPage.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n\t<a-modal v-model=\"visible\" title=\"编辑我的新评论\" on-ok=\"handleOk\" :afterClose=\"handleCancel\" width=\"800px\" :dialog-style=\"{ top: '15px' }\">\r\n\t\t<template slot=\"footer\">\r\n\t\t\t<a-button key=\"back\" @click=\"handleCancel\">\r\n\t\t\t\t取消\r\n\t\t\t</a-button>\r\n\t\t\t<a-button key=\"submit\" type=\"primary\" :loading=\"buttonloading\" @click=\"handleOk\">\r\n\t\t\t\t提交\r\n\t\t\t</a-button>\r\n\t\t</template>\r\n\t\t<div>\r\n\t\t\t<div style=\"display: flex; justify-content: flex-start;\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t电影关键字：\r\n\t\t\t\t\t<a-input style=\"width:250px; margin: 20px 0 ;\" v-model=\"movieName\" placeholder=\"电影名\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<a-button type=\"primary\" icon=\"search\" style=\"margin: 20px 0 0 50px\" @click=\"search\">\r\n\t\t\t\t\t搜索\r\n\t\t\t\t</a-button>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a-table :columns=\"columns\" :data-source=\"dataSource\" :loading=\"dataloading\" :row-selection=\"rowSelection\"\r\n\t\t\t\t :pagination=\" {pageSize:pageSize}\" :scroll=\"{ y: 200 }\">\r\n\t\t\t\t\t<b slot=\"name\" slot-scope=\"text\">{{ text }}</b>\r\n\t\t\t\t</a-table>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a-divider orientation=\"left\">评论</a-divider>\r\n\t\t\t\t<a-input type=\"textarea\" v-model=\"params.content\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t</a-modal>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from 'vuex';\r\n\tconst columns = [{\r\n\t\t\ttitle: '电影名',\r\n\t\t\tdataIndex: 'name',\r\n\t\t\tscopedSlots: {\r\n\t\t\t\tcustomRender: 'name'\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '发行时间',\r\n\t\t\tdataIndex: 'releaseTime',\r\n\t\t\tkey: 'releaseTime',\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\ttitle: '导演',\r\n\t\t\tdataIndex: 'directors',\r\n\t\t\tkey: 'directors',\r\n\t\t},\r\n\t];\r\n\tcolumns.forEach((r) => {\r\n\t\tr.align = 'center'\r\n\t});\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['requestPath', 'userInfo']),\r\n\t\t\trowSelection() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tonSelect: (record, selected, selectedRows) => {\r\n\t\t\t\t\t\tthis.params.mids = []\r\n\t\t\t\t\t\tfor (var i = 0; i < selectedRows.length; i++) {\r\n\t\t\t\t\t\t\tthis.params.mids.push(selectedRows[i].mid);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonSelectAll: (selected, selectedRows, changeRows) => {\r\n\t\t\t\t\t\tthis.params.mids = []\r\n\t\t\t\t\t\tfor (var i = 0; i < selectedRows.length; i++) {\r\n\t\t\t\t\t\t\tthis.params.mids.push(selectedRows[i].mid);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tprops: ['visible'],\r\n\t\tasync created() {\r\n\t\t\tthis.getAllMovie();\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tlabelCol: {\r\n\t\t\t\t\tspan: 4\r\n\t\t\t\t},\r\n\t\t\t\twrapperCol: {\r\n\t\t\t\t\tspan: 14\r\n\t\t\t\t},\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tuid: 0,\r\n\t\t\t\t\tmids: [],\r\n\t\t\t\t\tcontent: null,\r\n\t\t\t\t},\r\n\t\t\t\tmovieName: null,\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t\tdataSource: null,\r\n\t\t\t\tdataloading: true,\r\n\t\t\t\tbuttonloading: false,\r\n\t\t\t\tcolumns,\r\n\t\t\t\tselectedRowKeys: [],\r\n\t\t\t\tselectedRows: [],\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonChange(date, dateString) {\r\n\t\t\t\tthis.movie.releaseTime = dateString;\r\n\t\t\t},\r\n\t\t\tasync getAllMovie() {\r\n\t\t\t\tthis.dataloading = true;\r\n\t\t\t\tif (this.$store.state.userInfo) {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'allMovies');\r\n\t\t\t\t\tthis.dataSource = data.data;\r\n\t\t\t\t\tthis.dataloading = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"userInfo not found\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync search() {\r\n\t\t\t\tthis.dataloading = true;\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.requestPath + 'getMovieByName/' + this.movieName);\r\n\t\t\t\tthis.dataSource = data.data;\r\n\t\t\t\tthis.dataloading = false;\r\n\t\t\t},\r\n\t\t\tasync addComment() {\r\n\t\t\t\tthis.params.uid = this.userInfo.uid;\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.axios.post(this.requestPath + 'adminAddComment', this.params);\r\n\t\t\t\tif (data.code == 0) {\r\n\t\t\t\t\tthis.$emit('updateDataSource');\r\n\t\t\t\t\tthis.$message.success('添加成功');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error('添加失败');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync handleOk(e) {\r\n\t\t\t\tif (this.params.content != null && this.params.content != \"\") {\r\n\t\t\t\t\tthis.addComment();\r\n\t\t\t\t}\r\n\t\t\t\tthis.buttonloading = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.$emit('updatePopWinState', false);\r\n\t\t\t\t\tthis.buttonloading = false;\r\n\t\t\t\t}, 2000);\r\n\t\t\t},\r\n\t\t\thandleCancel(e) {\r\n\t\t\t\tthis.imageUrl = null;\r\n\t\t\t\tthis.$emit('updatePopWinState', false);\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang='scss'>\r\n\t.inputFieldStyle {\r\n\t\twidth: 320px;\r\n\t}\r\n</style>\n"]}]}