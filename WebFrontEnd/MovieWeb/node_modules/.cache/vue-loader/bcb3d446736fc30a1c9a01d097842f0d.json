{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\CarouselList.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\CarouselList.vue","mtime":1614658113036},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgkuYW50LXVwbG9hZC1saXN0LXBpY3R1cmUtY2FyZC1jb250YWluZXIgewoJCWZsb2F0OiBsZWZ0OwogCQl3aWR0aDogNjAwcHg7CgkJaGVpZ2h0OiAyODBweDsKCQltYXJnaW46IDAgOHB4IDhweCAwIAoJfQoKCS5hbnQtdXBsb2FkLWxpc3QtcGljdHVyZS1jYXJkIC5hbnQtdXBsb2FkLWxpc3QtaXRlbSB7CgkJZmxvYXQ6IGxlZnQ7CgkJd2lkdGg6IDYwMHB4OwoJCWhlaWdodDogMjgwcHg7CgkJbWFyZ2luOiAwIDE1cHggMTVweCAwOwoJfQoKCS5hbnQtdXBsb2FkLXNlbGVjdC1waWN0dXJlLWNhcmQgaSB7CgkJd2lkdGg6IDU4MHB4OwoJCWhlaWdodDogMjM1cHg7CgkJZm9udC1zaXplOiAzMnB4OwoJCW1hcmdpbi1ib3R0b206IC04MHB4OwoJCWNvbG9yOiAjOTk5OwoJfQoKCS5hbnQtdXBsb2FkLXNlbGVjdC1waWN0dXJlLWNhcmQgLmFudC11cGxvYWQtdGV4dCB7CgkJZm9udC1zaXplOiAzMnB4OwoJCW1hcmdpbi10b3A6IDUwcHg7CgkJY29sb3I6ICM2NjY7Cgl9Cg=="},{"version":3,"sources":["CarouselList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"CarouselList.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n\t<div style=\"margin:5px 0 0 10px;\">\r\n\t\t<a-upload :action=\"this.$store.state.requestPath + 'uploadCauousel'\" list-type=\"picture-card\" :file-list=\"fileList\"\r\n\t\t @preview=\"handlePreview\" @change=\"handleChange\" :remove=\"handleRemove\">\r\n\t\t\t<div v-if=\"fileList.length < 4\">\r\n\t\t\t\t<div class=\"ant-upload-text\">\r\n\t\t\t\t\t<a-icon type=\"plus\"></a-icon>\r\n\t\t\t\t\t<div>上传</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</a-upload>\r\n\t\t<a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancel\">\r\n\t\t\t<img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\r\n\t\t</a-modal>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from 'vuex';\r\n\r\n\tfunction getBase64(file) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.readAsDataURL(file);\r\n\t\t\treader.onload = () => resolve(reader.result);\r\n\t\t\treader.onerror = error => reject(error);\r\n\t\t});\r\n\t}\r\n\texport default {\r\n\t\tasync created() {\r\n\t\t\tthis.getCarousel();\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['userInfo', 'requestPath'])\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpreviewVisible: false,\r\n\t\t\t\tpreviewImage: '',\r\n\t\t\t\tfileList: [],\r\n\t\t\t};\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tfileList: async function(data) {\r\n\t\t\t\tthis.getCarousel();\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync getCarousel(){\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + '/admin/getCarousel');\r\n\t\t\t\tlet filename = data.data;\r\n\t\t\t\tthis.fileList = [];\r\n\t\t\t\tfor(var i=0; i<filename.length; i++){\r\n\t\t\t\t\tlet file = {uid:-(i+1), name:filename[i], status:'done','url': this.requestPath+'carousel/'+filename[i]};\r\n\t\t\t\t\tthis.fileList.push(file);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleCancel() {\r\n\t\t\t\tthis.previewVisible = false;\r\n\t\t\t},\r\n\t\t\tasync handlePreview(file) {\r\n\t\t\t\tif (!file.url && !file.preview) {\r\n\t\t\t\t\tfile.preview = await getBase64(file.originFileObj);\r\n\t\t\t\t}\r\n\t\t\t\tthis.previewImage = file.url || file.preview;\r\n\t\t\t\tthis.previewVisible = true;\r\n\t\t\t},\r\n\t\t\thandleChange({\r\n\t\t\t\tfileList\r\n\t\t\t}) {\r\n\t\t\t\tthis.fileList = fileList;\r\n\t\t\t},\r\n\t\t\tasync handleRemove(file){\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + '/admin/delCarousel/' + file.name);\r\n\t\t\t\tif(data.code == 0){\r\n\t\t\t\t\tthis.$message.success('删除成功');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$message.error('删除失败');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>\r\n<style lang=\"scss\">\r\n\r\n\t.ant-upload-list-picture-card-container {\r\n\t\tfloat: left;\r\n \t\twidth: 600px;\r\n\t\theight: 280px;\r\n\t\tmargin: 0 8px 8px 0 \r\n\t}\r\n\r\n\t.ant-upload-list-picture-card .ant-upload-list-item {\r\n\t\tfloat: left;\r\n\t\twidth: 600px;\r\n\t\theight: 280px;\r\n\t\tmargin: 0 15px 15px 0;\r\n\t}\r\n\r\n\t.ant-upload-select-picture-card i {\r\n\t\twidth: 580px;\r\n\t\theight: 235px;\r\n\t\tfont-size: 32px;\r\n\t\tmargin-bottom: -80px;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.ant-upload-select-picture-card .ant-upload-text {\r\n\t\tfont-size: 32px;\r\n\t\tmargin-top: 50px;\r\n\t\tcolor: #666;\r\n\t}\r\n</style>\n"]}]}