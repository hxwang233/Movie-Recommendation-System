{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\AdminList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\AdminList.vue","mtime":1614256244904},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBZG1pbkFkZFBhZ2UgZnJvbSAnLi9BZG1pbkFkZFBhZ2UudnVlJwppbXBvcnQgbG9jYWxlIGZyb20gJ2FudC1kZXNpZ24tdnVlL2VzL2RhdGUtcGlja2VyL2xvY2FsZS96aF9DTic7CmltcG9ydCB7CgltYXBNdXRhdGlvbnMsCgltYXBTdGF0ZQp9IGZyb20gInZ1ZXgiOwpjb25zdCBjb2x1bW5zID0gWwoJewoJCXRpdGxlOiAn55So5oi35ZCNJywKCQlkYXRhSW5kZXg6ICduYW1lJywKCQlzY29wZWRTbG90czogewoJCQljdXN0b21SZW5kZXI6ICduYW1lJwoJCX0sCgl9LAoJewoJCXRpdGxlOiAn55S15a2Q6YKu566xJywKCQlkYXRhSW5kZXg6ICdlbWFpbCcsCgl9LAoJewoJCXRpdGxlOiAn5Yib5bu65pe26Ze0JywKCQlkYXRhSW5kZXg6ICdjcmVhdGVkVGltZScsCgl9LAoJewoJCXRpdGxlOiAn5p2D6ZmQJywKCQlkYXRhSW5kZXg6ICdhY2Nlc3MnLAoJCXNjb3BlZFNsb3RzOiB7CgkJCWN1c3RvbVJlbmRlcjogJ2FjY2VzcycKCQl9LAoJfSwKCXsKCQl0aXRsZTogJ+aTjeS9nCcsCgkJZGF0YUluZGV4OiAnYWN0aW9uJywKCQlzY29wZWRTbG90czogewoJCQljdXN0b21SZW5kZXI6ICdhY3Rpb24nCgkJfSwKCX0sCl07CmNvbHVtbnMuZm9yRWFjaCgocikgPT4gewoJci5hbGlnbiA9ICdjZW50ZXInCn0pOwoKZXhwb3J0IGRlZmF1bHQgewoJY29tcG9uZW50czogewoJCUFkbWluQWRkUGFnZQoJfSwKCWRhdGEoKSB7CgkJcmV0dXJuIHsJCgkJCWxvY2FsZSwKCQkJcGFyYW1zIDogewoJCQkJa2V5IDogbnVsbCwKCQkJCWFjY2VzczogbnVsbCwKCQkJCXN0YXJ0VGltZTogbnVsbCwKCQkJCWVuZFRpbWU6IG51bGwsCgkJCX0sCgkJCWRhdGFTb3VyY2U6IG51bGwsCgkJCXBhZ2U6IDEsCgkJCXBhZ2VTaXplOiAxMCwKCQkJZGF0YWxvYWRpbmc6IHRydWUsCgkJCXZpc2libGU6IGZhbHNlLAoJCQljb2x1bW5zLAoJCQljb2xsYXBzZWQ6IHRydWUsCgkJCWFsbEFjY2Vzc0xpc3Q6IG51bGwsCgkJfTsKCX0sCgljb21wdXRlZDogewoJCS4uLm1hcFN0YXRlKFsncmVxdWVzdFBhdGgnLCAndXNlckluZm8nXSkKCX0sCgkKCWFzeW5jIGNyZWF0ZWQoKSB7CgkJdGhpcy5nZXRBY2Nlc3NMaXN0KCk7CgkJdGhpcy5nZXRBbGxBZG1pbigpOwoJfSwKCW1ldGhvZHM6IHsKCQlvbkNoYW5nZShkYXRlLCBkYXRlU3RyaW5nKSB7CgkJCXRoaXMucGFyYW1zLnN0YXJ0VGltZSA9IGRhdGVTdHJpbmdbMF07CgkJCXRoaXMucGFyYW1zLmVuZFRpbWUgPSBkYXRlU3RyaW5nWzFdOwoJCX0sCgkJYXN5bmMgZ2V0QWNjZXNzTGlzdCgpewoJCQlpZiAodGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8pIHsKCQkJCWxldCB7CgkJCQkJZGF0YQoJCQkJfSA9IGF3YWl0IHRoaXMuJGdldCh0aGlzLiRzdG9yZS5zdGF0ZS5yZXF1ZXN0UGF0aCArICdhbGxBY2Nlc3MnKTsKCQkJCWNvbnNvbGUubG9nKGRhdGEpCgkJCQl0aGlzLmFsbEFjY2Vzc0xpc3QgPSBkYXRhLmRhdGE7CgkJCX0gZWxzZSB7CgkJCQljb25zb2xlLmxvZygidXNlckluZm8gbm90IGZvdW5kIik7CgkJCX0KCQl9LAoJCWFzeW5jIGdldEFsbEFkbWluKCl7CgkJCXRoaXMuZGF0YWxvYWRpbmcgPSB0cnVlOwoJCQlpZiAodGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8pIHsKCQkJCWxldCB7CgkJCQkJZGF0YQoJCQkJfSA9IGF3YWl0IHRoaXMuJGdldCh0aGlzLiRzdG9yZS5zdGF0ZS5yZXF1ZXN0UGF0aCArICdhbGxBZG1pbicpOwoJCQkJY29uc29sZS5sb2coZGF0YSk7CgkJCQl0aGlzLmRhdGFTb3VyY2UgPSBkYXRhLmRhdGE7CgkJCQl0aGlzLmRhdGFsb2FkaW5nID0gZmFsc2U7CgkJCX0gZWxzZSB7CgkJCQljb25zb2xlLmxvZygidXNlckluZm8gbm90IGZvdW5kIik7CgkJCX0KCQl9LAoJCWFzeW5jIHNlYXJjaCgpewoJCQl0aGlzLmRhdGFsb2FkaW5nID0gdHJ1ZTsKCQkJbGV0IHsKCQkJCWRhdGEKCQkJfSA9IGF3YWl0IHRoaXMuYXhpb3MucG9zdCh0aGlzLnJlcXVlc3RQYXRoICsgJ3NlYXJjaEFkbWluJywgdGhpcy5wYXJhbXMpOwoJCQl0aGlzLmRhdGFTb3VyY2UgPSBkYXRhLmRhdGE7CgkJCXRoaXMuZGF0YWxvYWRpbmcgPSBmYWxzZTsKCQl9LAoJCWFzeW5jIGNvbmZpcm1EZWxldGUoZSkgewoJCQljb25zb2xlLmxvZygnZGVsX3VpZDonICsgZSk7CQoJCQlsZXQgewoJCQkJZGF0YQoJCQl9ID0gYXdhaXQgdGhpcy4kZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLnJlcXVlc3RQYXRoICsgJ2RlbEFkbWluLycgKyBlKTsKCQkJaWYgKGRhdGEuY29kZSA9PSAwKXsKCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7CgkJCQljb25zdCBkYXRhU291cmNlID0gWy4uLnRoaXMuZGF0YVNvdXJjZV07CgkJCQl0aGlzLmRhdGFTb3VyY2UgPSBkYXRhU291cmNlLmZpbHRlcihpdGVtID0+IGl0ZW0udWlkICE9PSBlKTsKCQkJfWVsc2V7CgkJCQl0aGlzLiRtZXNzYWdlLmVycm9yKCfliKDpmaTlpLHotKUnKTsKCQkJfQkKCQl9LAoJCWFzeW5jIGNvbmZpcm1SZXNldChlKSB7CgkJCWNvbnNvbGUubG9nKCdyZXNldF91aWQ6JyArIGUpOwkKCQkJbGV0IHsKCQkJCWRhdGEKCQkJfSA9IGF3YWl0IHRoaXMuJGdldCh0aGlzLiRzdG9yZS5zdGF0ZS5yZXF1ZXN0UGF0aCArICdyZXNldEFkbWluUHdkLycgKyBlKTsKCQkJaWYgKGRhdGEuY29kZSA9PSAwKXsKCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn6YeN572u5a+G56CB5oiQ5YqfJyk7CgkJCX1lbHNlewoJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcign6YeN572u5a+G56CB5aSx6LSlJyk7CgkJCX0JCgkJfSwKCQkKCQljYW5jZWwoZSkgewoJCQljb25zb2xlLmxvZyhlKTsKCQl9LAoJCXNob3dNb2RhbCgpIHsKCQkJdGhpcy52aXNpYmxlID0gdHJ1ZTsKCQl9LAoJCXVwZGF0ZVBvcFdpblN0YXRlKHN0YXRlKXsKCQkJdGhpcy52aXNpYmxlID0gc3RhdGU7CgkJfSwKCQlhc3luYyB1cGRhdGVEYXRhU291cmNlKCl7CgkJCXRoaXMuZ2V0QWxsQWRtaW4oKTsKCQl9LAoJfSwKfTsK"},{"version":3,"sources":["AdminList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdminList.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<div>\r\n\t\t\t<a-button type=\"primary\" icon=\"plus-circle\" @click=\"showModal\">\r\n\t\t\t\t添加\r\n\t\t\t</a-button>\r\n\t\t\t<AdminAddPage :visible=\"visible\" :allAccessList=\"allAccessList\"  @updateDataSource=\"updateDataSource\" @updatePopWinState=\"updatePopWinState\"></AdminAddPage>\r\n\t\t\t<div style=\"display: flex; justify-content: flex-start;\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t搜关键字：\r\n\t\t\t\t\t<a-input style=\"width:250px; margin: 20px 0 ;\" v-model=\"params.key\"\r\n\t\t\t\t\t placeholder=\"用户名/电子邮箱\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"margin: 20px 0 0 25px\">\r\n\t\t\t\t\t权限：\r\n\t\t\t\t\t<a-select placeholder=\"选择权限\" v-model=\"params.access\" style=\"width: 150px;\" :allowClear=\"true\">\r\n\t\t\t\t\t\t<a-select-option :value=access.id v-for=\"access in allAccessList\">{{access.menuKey}}</a-select-option>\r\n\t\t\t\t\t</a-select>\r\n\t\t\t\t</div>\r\n\t\t\t\t<a-button type=\"primary\" icon=\"search\" style=\"margin: 20px 0 0 50px\" @click=\"search\">\r\n\t\t\t\t\t搜索\r\n\t\t\t\t</a-button>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div v-show=\"!collapsed\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t创建时间：\r\n\t\t\t\t\t<a-range-picker @change=\"onChange\" style=\"width:250px; \" :locale=\"locale\"/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<a-divider style=\"color: #999999; margin-top: -2px;\">\r\n\t\t\t\t<a-icon @click=\"collapsed=!collapsed\" :type=\"collapsed?'down-circle':'up-circle'\" />\r\n\t\t\t\t{{collapsed?\"展开\":\"收起\"}}更多选项\r\n\t\t\t</a-divider>\r\n\t\t</div>\r\n\r\n\t\t<a-table :columns=\"columns\" :data-source=\"dataSource\" :loading=\"dataloading\" :pagination=\" {pageSize:pageSize}\" :scroll=\"{ y: 280 }\">\r\n\t\t\t<b slot=\"name\" slot-scope=\"text\">{{ text }}</b>\r\n\t\t\t<span slot=\"access\" slot-scope=\"text, record\" v-if=\"record.accessList\">\r\n\t\t\t\t<a-tag v-for=\"access in record.accessList\" :color=\"access.tagColor\">\r\n\t\t\t\t\t{{ access.menuKey }}\r\n\t\t\t\t</a-tag>\r\n\t\t\t</span>\r\n\t\t\t<span slot=\"action\" slot-scope=\"text, record\">\r\n\t\t\t\t<div style=\"display: flex; justify-content: center;\">\r\n\t\t\t\t\t<a-popconfirm title=\"是否确定删除？\" ok-text=\"是\" cancel-text=\"否\" @confirm=\"confirmDelete(record.uid)\"\r\n\t\t\t\t\t @cancel=\"cancel\">\r\n\t\t\t\t\t\t<a>删除</a>\r\n\t\t\t\t\t</a-popconfirm>\r\n\t\t\t\t\t<a-divider type=\"vertical\" />\r\n\t\t\t\t\t<router-view :record=\"record\" :allAccessList=\"allAccessList\" @updateDataSource=\"updateDataSource\"></router-view>\r\n\t\t\t\t\t<a-divider type=\"vertical\" />\r\n\t\t\t\t\t<a-popconfirm title=\"是否确定重置密码？\" ok-text=\"是\" cancel-text=\"否\" @confirm=\"confirmReset(record.uid)\"\r\n\t\t\t\t\t @cancel=\"cancel\">\r\n\t\t\t\t\t\t<a>重置密码</a>\r\n\t\t\t\t\t</a-popconfirm>\r\n\t\t\t\t</div>\r\n\t\t\t</span>\r\n\t\t</a-table>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\timport AdminAddPage from './AdminAddPage.vue'\r\n\timport locale from 'ant-design-vue/es/date-picker/locale/zh_CN';\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from \"vuex\";\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: '用户名',\r\n\t\t\tdataIndex: 'name',\r\n\t\t\tscopedSlots: {\r\n\t\t\t\tcustomRender: 'name'\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '电子邮箱',\r\n\t\t\tdataIndex: 'email',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '创建时间',\r\n\t\t\tdataIndex: 'createdTime',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '权限',\r\n\t\t\tdataIndex: 'access',\r\n\t\t\tscopedSlots: {\r\n\t\t\t\tcustomRender: 'access'\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '操作',\r\n\t\t\tdataIndex: 'action',\r\n\t\t\tscopedSlots: {\r\n\t\t\t\tcustomRender: 'action'\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n\tcolumns.forEach((r) => {\r\n\t\tr.align = 'center'\r\n\t});\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tAdminAddPage\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\t\r\n\t\t\t\tlocale,\r\n\t\t\t\tparams : {\r\n\t\t\t\t\tkey : null,\r\n\t\t\t\t\taccess: null,\r\n\t\t\t\t\tstartTime: null,\r\n\t\t\t\t\tendTime: null,\r\n\t\t\t\t},\r\n\t\t\t\tdataSource: null,\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t\tdataloading: true,\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tcolumns,\r\n\t\t\t\tcollapsed: true,\r\n\t\t\t\tallAccessList: null,\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['requestPath', 'userInfo'])\r\n\t\t},\r\n\t\t\r\n\t\tasync created() {\r\n\t\t\tthis.getAccessList();\r\n\t\t\tthis.getAllAdmin();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonChange(date, dateString) {\r\n\t\t\t\tthis.params.startTime = dateString[0];\r\n\t\t\t\tthis.params.endTime = dateString[1];\r\n\t\t\t},\r\n\t\t\tasync getAccessList(){\r\n\t\t\t\tif (this.$store.state.userInfo) {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'allAccess');\r\n\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\tthis.allAccessList = data.data;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"userInfo not found\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getAllAdmin(){\r\n\t\t\t\tthis.dataloading = true;\r\n\t\t\t\tif (this.$store.state.userInfo) {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'allAdmin');\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\tthis.dataSource = data.data;\r\n\t\t\t\t\tthis.dataloading = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"userInfo not found\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync search(){\r\n\t\t\t\tthis.dataloading = true;\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.axios.post(this.requestPath + 'searchAdmin', this.params);\r\n\t\t\t\tthis.dataSource = data.data;\r\n\t\t\t\tthis.dataloading = false;\r\n\t\t\t},\r\n\t\t\tasync confirmDelete(e) {\r\n\t\t\t\tconsole.log('del_uid:' + e);\t\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'delAdmin/' + e);\r\n\t\t\t\tif (data.code == 0){\r\n\t\t\t\t\tthis.$message.success('删除成功');\r\n\t\t\t\t\tconst dataSource = [...this.dataSource];\r\n\t\t\t\t\tthis.dataSource = dataSource.filter(item => item.uid !== e);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$message.error('删除失败');\r\n\t\t\t\t}\t\r\n\t\t\t},\r\n\t\t\tasync confirmReset(e) {\r\n\t\t\t\tconsole.log('reset_uid:' + e);\t\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'resetAdminPwd/' + e);\r\n\t\t\t\tif (data.code == 0){\r\n\t\t\t\t\tthis.$message.success('重置密码成功');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$message.error('重置密码失败');\r\n\t\t\t\t}\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tcancel(e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t},\r\n\t\t\tshowModal() {\r\n\t\t\t\tthis.visible = true;\r\n\t\t\t},\r\n\t\t\tupdatePopWinState(state){\r\n\t\t\t\tthis.visible = state;\r\n\t\t\t},\r\n\t\t\tasync updateDataSource(){\r\n\t\t\t\tthis.getAllAdmin();\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\n"]}]}