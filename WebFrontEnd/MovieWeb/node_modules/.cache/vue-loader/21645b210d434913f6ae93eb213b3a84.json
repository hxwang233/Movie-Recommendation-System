{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\user\\Layout.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\user\\Layout.vue","mtime":1614424550896},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNc2dQYWdlIGZyb20gIi4vTXNnUGFnZS52dWUiOwppbXBvcnQgewoJbWFwTXV0YXRpb25zLAoJbWFwU3RhdGUKfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewoJY29tcG9uZW50czp7CgkJTXNnUGFnZQoJfSwKCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJb3BlbjogZmFsc2UsCgkJCW1zZ051bTogMCwKCQl9OwoJfSwKCWFzeW5jIGNyZWF0ZWQoKSB7CgkJdGhpcy5nZXRNc2dOdW0oKTsKCX0sCgljb21wdXRlZDogewoJCS4uLm1hcFN0YXRlKFsncmVxdWVzdFBhdGgnLCd1c2VySW5mbyddKSwKCQl0aXRsZSgpIHsKCQkJcmV0dXJuIHRoaXMuJHJvdXRlLm1ldGEudGl0bGU7CgkJfSwKCX0sCgltZXRob2RzOiB7CgkJLi4ubWFwTXV0YXRpb25zKFsnbG9nb3V0J10pLAoJCWFzeW5jIGdldE1zZ051bSgpIHsKCQkJaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvKSB7CgkJCQlsZXQgewoJCQkJCWRhdGEKCQkJCX0gPSBhd2FpdCB0aGlzLiRnZXQodGhpcy4kc3RvcmUuc3RhdGUucmVxdWVzdFBhdGggKyAnbXNnX251bS8nICsgdGhpcy51c2VySW5mby51aWQpOwoJCQkJdGhpcy5tc2dOdW0gPSBkYXRhLmRhdGE7CgkJCX0gZWxzZSB7CgkJCQljb25zb2xlLmxvZygidXNlckluZm8gbm90IGZvdW5kIik7CgkJCX0KCQl9LAoJCXVzZXJMb2dvdXQoKSB7CgkJCXRoaXMubG9nb3V0KCk7CgkJCXRoaXMuJHJvdXRlci5wdXNoKHsKCQkJCXBhdGg6ICcvJwoJCQl9KTsKCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCcgKO+/o++4tu+/oynihpfvvp4g5oSf6LCi5oKo55qE5L2/55SofiAnLCAyKTsKCQl9LAoJCXNob3dNc2dXaW5kb3coKXsKCQkJdGhpcy5vcGVuID0gdHJ1ZTsKCQl9LAoJCWNsb3NlTXNnV2luZG93KCl7CgkJCXRoaXMub3BlbiA9IGZhbHNlOwoJCQl0aGlzLmdldE1zZ051bSgpOwoJCX0sCgl9Cn0K"},{"version":3,"sources":["Layout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Layout.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\r\n\t<a-layout id=\"components-layout-demo-fixed\">\r\n\t\t<!-- <a-layout-header :style=\"{ position: 'fixed', zIndex: 1, width: '100%' }\"> -->\r\n\t\t<a-layout-header :style=\"{zIndex: 1, width: '100%' }\">\r\n\t\t\t<div class=\"logo\" />\r\n\t\t\t<a-menu theme=\"dark\" mode=\"horizontal\" :default-selected-keys=\"[title]\" :style=\"{ lineHeight: '64px'}\">\r\n\t\t\t\t<!-- <a-menu-item :key=i v-for=\"i in 3\" @click=\"navMove(i)\">nav {{i}}</a-menu-item> -->\r\n\t\t\t\t<a-menu-item key=\"推荐库\">\r\n\t\t\t\t\t<router-link to=\"/home/nav1\"><span>首页</span></router-link>\r\n\t\t\t\t</a-menu-item>\r\n\t\t\t\t<a-menu-item key=\"影视库\">\r\n\t\t\t\t\t<router-link to=\"/home/nav2\"><span>影视库</span></router-link>\r\n\t\t\t\t</a-menu-item>\r\n\t\t\t\t<!-- 判断是否为null -->\r\n\t\t\t\t<a-dropdown :style=\"{float: 'right', 'margin-right':'-10px', 'fontSize':'18px'}\"  placement=\"bottomRight\" size=\"large\" v-if=\"userInfo\">\r\n\t\t\t\t\t<a class=\"ant-dropdown-link\" @click=\"e => e.preventDefault()\">\r\n\t\t\t\t\t\t<a-badge :count=\"msgNum\">\r\n\t\t\t\t\t\t\t<a-avatar shape=\"square\" :src=\"requestPath + 'userpic/' +userInfo.headPic\" :alt=\"userInfo.name\"/>\r\n\t\t\t\t\t\t</a-badge><span style=\"margin-left: 20px;\">{{userInfo.name}}</span>\r\n\t\t\t\t\t\t<!--\r\n\t\t\t\t\t\t<a-icon type=\"user\" /> \r\n\t\t\t\t\t\t<a-icon type=\"down\" /> -->\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a-menu slot=\"overlay\"  >\r\n\t\t\t\t\t\t<a-menu-item @click=\"showMsgWindow()\">\r\n\t\t\t\t\t\t\t<a-icon type=\"sound\" /><span style=\"margin-left: 5px;\">通知</span>\r\n\t\t\t\t\t\t\t<MsgPage v-if=\"open\" :open=\"open\" :msgNum=\"msgNum\" @closeMsgWindow=\"closeMsgWindow\"></MsgPage>\r\n\t\t\t\t\t\t</a-menu-item>\r\n\t\t\t\t\t\t<a-menu-item>\r\n\t\t\t\t\t\t\t<router-link to=\"/home/user_info\">\r\n\t\t\t\t\t\t\t\t<a-icon type=\"edit\" /><span style=\"margin-left: 10px;\">资料</span>\r\n\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t</a-menu-item>\r\n\t\t\t\t\t\t<a-menu-item @click=\"userLogout()\">\r\n\t\t\t\t\t\t\t<a-icon type=\"logout\" /><span style=\"margin-left: 5px;\">退出</span>\r\n\t\t\t\t\t\t</a-menu-item>\r\n\t\t\t\t\t</a-menu>\r\n\t\t\t\t</a-dropdown>\r\n\t\t\t\t<a-menu-item :style=\"{float: 'right', 'margin-right':'-25px'}\" @click=\"userLogout()\" v-else>\r\n\t\t\t\t\t<a-icon type=\"login\" />&nbsp;&nbsp; 登录\r\n\t\t\t\t</a-menu-item>\r\n\t\t\t</a-menu>\r\n\t\t</a-layout-header>\r\n\r\n\t\t<router-view></router-view>\r\n\t\t<a-layout-footer :style=\"{ textAlign: 'center' }\">\r\n\t\t\tHave a Nice Day! --Ant Design ©2020 Created--\r\n\t\t</a-layout-footer>\r\n\t</a-layout>\r\n</template>\r\n\r\n\r\n<script>\r\n\timport MsgPage from \"./MsgPage.vue\";\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from \"vuex\";\r\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\tMsgPage\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\topen: false,\r\n\t\t\t\tmsgNum: 0,\r\n\t\t\t};\r\n\t\t},\r\n\t\tasync created() {\r\n\t\t\tthis.getMsgNum();\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['requestPath','userInfo']),\r\n\t\t\ttitle() {\r\n\t\t\t\treturn this.$route.meta.title;\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations(['logout']),\r\n\t\t\tasync getMsgNum() {\r\n\t\t\t\tif (this.$store.state.userInfo) {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'msg_num/' + this.userInfo.uid);\r\n\t\t\t\t\tthis.msgNum = data.data;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"userInfo not found\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tuserLogout() {\r\n\t\t\t\tthis.logout();\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/'\r\n\t\t\t\t});\r\n\t\t\t\tthis.$message.success(' (￣︶￣)↗ﾞ 感谢您的使用~ ', 2);\r\n\t\t\t},\r\n\t\t\tshowMsgWindow(){\r\n\t\t\t\tthis.open = true;\r\n\t\t\t},\r\n\t\t\tcloseMsgWindow(){\r\n\t\t\t\tthis.open = false;\r\n\t\t\t\tthis.getMsgNum();\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t#components-layout-demo-fixed {\r\n\t\tbackground: rgba(255, 255, 255, 0.2);\r\n\r\n\t\t.logo {\r\n\t\t\twidth: 120px;\r\n\t\t\theight: 31px;\r\n\t\t\tbackground: rgba(255, 255, 255, 0.2);\r\n\t\t\tmargin: 16px 24px 16px 0;\r\n\t\t\tfloat: left;\r\n\t\t}\r\n\t}\r\n\t\r\n\t#components-badge-demo-dot .anticon-notification {\r\n\t  width: 16px;\r\n\t  height: 16px;\r\n\t  line-height: 16px;\r\n\t  font-size: 1px;\r\n\t}\r\n</style>\n"]}]}