{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\UserDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\admin\\UserDetail.vue","mtime":1614328324972},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CgltYXBNdXRhdGlvbnMsCgltYXBTdGF0ZQp9IGZyb20gJ3Z1ZXgnCmZ1bmN0aW9uIGdldEJhc2U2NChpbWcsIGNhbGxiYWNrKSB7Cgljb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoJcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiBjYWxsYmFjayhyZWFkZXIucmVzdWx0KSk7CglyZWFkZXIucmVhZEFzRGF0YVVSTChpbWcpOwp9OwpleHBvcnQgZGVmYXVsdCB7Cgljb21wdXRlZDogewoJCS4uLm1hcFN0YXRlKFsndXNlckluZm8nLCAncmVxdWVzdFBhdGgnXSkKCX0sCglkYXRhKCkgewoJCXJldHVybiB7CgkJCWxhYmVsQ29sOiB7CgkJCQlzcGFuOiA0CgkJCX0sCgkJCXdyYXBwZXJDb2w6IHsKCQkJCXNwYW46IDE0CgkJCX0sCgkJCQoJCQlwaWNsb2FkaW5nIDogZmFsc2UsCgkJCW1vZGlmeTogZmFsc2UsCgkJCXZpc2libGU6IGZhbHNlLAoJCQlpbWFnZVVybDogJycsCgkJCWxhdGVzdEltYWdlVXJsOiBudWxsLAoJCX07Cgl9LAoJcHJvcHM6IFsncmVjb3JkJywnYWdlTGlzdCcsJ29jY3VwYXRpb25MaXN0J10sCglhc3luYyBjcmVhdGVkKCkgewoJCXRoaXMuaW1hZ2VVcmwgPSB0aGlzLnJlcXVlc3RQYXRoICsgJ3VzZXJwaWMvJyArIHRoaXMucmVjb3JkLmhlYWRQaWM7CgkJdGhpcy5sYXRlc3RJbWFnZVVybCA9IHRoaXMuaW1hZ2VVcmw7Cgl9LAoJd2F0Y2g6IHsKCQlyZWNvcmQ6IGFzeW5jIGZ1bmN0aW9uKG9iaikgewoJCQl0aGlzLmltYWdlVXJsID0gdGhpcy5yZXF1ZXN0UGF0aCArICd1c2VycGljLycgKyB0aGlzLnJlY29yZC5oZWFkUGljOwoJCQl0aGlzLmxhdGVzdEltYWdlVXJsID0gdGhpcy5pbWFnZVVybDsKCQl9Cgl9LAoJbWV0aG9kczogewoJCXNob3dEcmF3ZXIoKSB7CgkJCXRoaXMudmlzaWJsZSA9IHRydWU7CgkJfSwKCQlvbkNsb3NlKCkgewoJCQl0aGlzLnZpc2libGUgPSBmYWxzZTsKCQkJdGhpcy5tb2RpZnkgPSBmYWxzZTsKCQkJdGhpcy5yZWNvcmQuaGVhZFBpYyA9IHRoaXMubGF0ZXN0SW1hZ2VVcmw7CgkJCXRoaXMuaW1hZ2VVcmwgPSAgdGhpcy5sYXRlc3RJbWFnZVVybDsKCQl9LAoJCWFzeW5jIG9uU3VibWl0KCl7CgkJCWxldCB7CgkJCQlkYXRhCgkJCX0gPSBhd2FpdCB0aGlzLmF4aW9zLnBvc3QodGhpcy5yZXF1ZXN0UGF0aCArICdtb2RpZnlVc2VyJywgdGhpcy5yZWNvcmQpOwoJCQlpZiAoZGF0YS5jb2RlID09IDApIHsKCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJyk7CgkJCX1lbHNlewoJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcign5L+u5pS55aSx6LSlJyk7CgkJCX0KCQkJdGhpcy5vbkNsb3NlKCk7CgkJfSwKCQloYW5kbGVDaGFuZ2UoaW5mbykgewoJCQlpZiAoaW5mby5maWxlLnN0YXR1cyA9PT0gJ3VwbG9hZGluZycpIHsKCQkJCXRoaXMucGljbG9hZGluZyA9IHRydWU7CgkJCQlyZXR1cm47CgkJCX0KCQkJaWYgKGluZm8uZmlsZS5zdGF0dXMgPT09ICdkb25lJykgewoJCQkJLy8g5LuO5YmN56uv6I635Y+W5LiK5Lyg55qEIGltZy11cmwKCQkJCWdldEJhc2U2NChpbmZvLmZpbGUub3JpZ2luRmlsZU9iaiwgaW1hZ2VVcmwgPT4gewoJCQkJCXRoaXMuaW1hZ2VVcmwgPSBpbWFnZVVybDsKCQkJCQl0aGlzLnBpY2xvYWRpbmcgPSBmYWxzZTsKCQkJCX0pOwoJCQkJdGhpcy5yZWNvcmQuaGVhZFBpYyA9IGluZm8uZmlsZS5yZXNwb25zZS5kYXRhLnNyYzsKCQkJfQoJCX0sCgkJYmVmb3JlVXBsb2FkKGZpbGUpIHsKCQkJY29uc3QgaXNKcGdPclBuZyA9IGZpbGUudHlwZSA9PT0gJ2ltYWdlL2pwZWcnIHx8IGZpbGUudHlwZSA9PT0gJ2ltYWdlL3BuZyc7CgkJCWlmICghaXNKcGdPclBuZykgewoJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcignWW91IGNhbiBvbmx5IHVwbG9hZCBKUEcgZmlsZSEnKTsKCQkJfQoJCQljb25zdCBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDI7CgkJCWlmICghaXNMdDJNKSB7CgkJCQl0aGlzLiRtZXNzYWdlLmVycm9yKCdJbWFnZSBtdXN0IHNtYWxsZXIgdGhhbiAyTUIhJyk7CgkJCX0KCQkJcmV0dXJuIGlzSnBnT3JQbmcgJiYgaXNMdDJNOwoJCX0sCgl9LAp9Owo="},{"version":3,"sources":["UserDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserDetail.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<p style=\"cursor: pointer; color: #18aeff;\" @click=\"showDrawer\"> 详情 </p>\r\n\t\t<a-drawer title=\"用户资料\" :width=\"700\" :visible=\"visible\" :body-style=\"{ paddingBottom: '80px' }\" @close=\"onClose\">\r\n\t\t\t<a-form-model :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\r\n\t\t\t\t<div style=\"display: flex; justify-content: space-around;\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<a-form-model-item label=\"用户名\">\r\n\t\t\t\t\t\t\t<a-input v-model=\"record.name\" :disabled=\"true\" class=\"user_inputField\"/>\r\n\t\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t\t<a-form-model-item label=\"性别\">\r\n\t\t\t\t\t\t\t<a-select v-model=\"record.gender\" :disabled=\"!modify\" class=\"user_inputField\">\r\n\t\t\t\t\t\t\t\t<a-select-option value=\"M\">男</a-select-option>\r\n\t\t\t\t\t\t\t\t<a-select-option value=\"F\">女</a-select-option>\r\n\t\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t\t<a-form-model-item label=\"年龄\">\r\n\t\t\t\t\t\t\t<a-select v-model=\"ageList[record.age]\" :disabled=\"!modify\" class=\"user_inputField\">\r\n\t\t\t\t\t\t\t\t<a-select-option :value=key v-for=\"(value, key) in ageList\">\r\n\t\t\t\t\t\t\t\t\t{{value}}\r\n\t\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t\t<a-form-model-item label=\"职业\">\r\n\t\t\t\t\t\t\t<a-select v-model=\"occupationList[record.occupation]\" :disabled=\"!modify\" class=\"user_inputField\">\r\n\t\t\t\t\t\t\t\t<a-select-option :value=key v-for=\"(value, key) in occupationList\">\r\n\t\t\t\t\t\t\t\t\t{{value}}\r\n\t\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t\t<a-form-model-item label=\"邮编\">\r\n\t\t\t\t\t\t\t<a-input v-model=\"record.zipCode\" :disabled=\"!modify\" class=\"user_inputField\"/>\r\n\t\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<a-form-model-item label=\"\">\r\n\t\t\t\t\t\t<a-upload name=\"file\" list-type=\"picture-card\" class=\"poster-uploader\" :show-upload-list=\"false\" :action=\"this.$store.state.requestPath + 'uploadHeadPic'\"\r\n\t\t\t\t\t\t :before-upload=\"beforeUpload\" @change=\"handleChange\">\r\n\t\t\t\t\t\t\t<img v-if=\"imageUrl\" :src=\"imageUrl\" style=\"width: 200px; height: 240px;\" />\r\n\t\t\t\t\t\t\t<div v-else>\r\n\t\t\t\t\t\t\t\t<a-icon :type=\"picloading ? 'loading' : 'plus'\" />\r\n\t\t\t\t\t\t\t\t<div class=\"ant-upload-text\">\r\n\t\t\t\t\t\t\t\t\t上传\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</a-upload>\r\n\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<a-form-model-item label=\"修改开关\">\r\n\t\t\t\t\t\t<a-switch v-model=\"modify\" style=\"margin-left: 10px;\" />\r\n\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t\t<a-form-model-item :wrapper-col=\"{ span: 14, offset: 4 }\">\r\n\t\t\t\t\t\t<a-button type=\"primary\" @click=\"onSubmit\" :disabled=\"!modify\">\r\n\t\t\t\t\t\t\t确定\r\n\t\t\t\t\t\t</a-button>\r\n\t\t\t\t\t\t<a-button style=\"margin-left: 30px;\" @click=\"onClose\">\r\n\t\t\t\t\t\t\t返回\r\n\t\t\t\t\t\t</a-button>\r\n\t\t\t\t\t</a-form-model-item>\r\n\t\t\t\t</div>\r\n\t\t\t</a-form-model>\r\n\t\t</a-drawer>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from 'vuex'\r\n\tfunction getBase64(img, callback) {\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', () => callback(reader.result));\r\n\t\treader.readAsDataURL(img);\r\n\t};\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['userInfo', 'requestPath'])\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tlabelCol: {\r\n\t\t\t\t\tspan: 4\r\n\t\t\t\t},\r\n\t\t\t\twrapperCol: {\r\n\t\t\t\t\tspan: 14\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\tpicloading : false,\r\n\t\t\t\tmodify: false,\r\n\t\t\t\tvisible: false,\r\n\t\t\t\timageUrl: '',\r\n\t\t\t\tlatestImageUrl: null,\r\n\t\t\t};\r\n\t\t},\r\n\t\tprops: ['record','ageList','occupationList'],\r\n\t\tasync created() {\r\n\t\t\tthis.imageUrl = this.requestPath + 'userpic/' + this.record.headPic;\r\n\t\t\tthis.latestImageUrl = this.imageUrl;\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\trecord: async function(obj) {\r\n\t\t\t\tthis.imageUrl = this.requestPath + 'userpic/' + this.record.headPic;\r\n\t\t\t\tthis.latestImageUrl = this.imageUrl;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tshowDrawer() {\r\n\t\t\t\tthis.visible = true;\r\n\t\t\t},\r\n\t\t\tonClose() {\r\n\t\t\t\tthis.visible = false;\r\n\t\t\t\tthis.modify = false;\r\n\t\t\t\tthis.record.headPic = this.latestImageUrl;\r\n\t\t\t\tthis.imageUrl =  this.latestImageUrl;\r\n\t\t\t},\r\n\t\t\tasync onSubmit(){\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.axios.post(this.requestPath + 'modifyUser', this.record);\r\n\t\t\t\tif (data.code == 0) {\r\n\t\t\t\t\tthis.$message.success('修改成功');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$message.error('修改失败');\r\n\t\t\t\t}\r\n\t\t\t\tthis.onClose();\r\n\t\t\t},\r\n\t\t\thandleChange(info) {\r\n\t\t\t\tif (info.file.status === 'uploading') {\r\n\t\t\t\t\tthis.picloading = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (info.file.status === 'done') {\r\n\t\t\t\t\t// 从前端获取上传的 img-url\r\n\t\t\t\t\tgetBase64(info.file.originFileObj, imageUrl => {\r\n\t\t\t\t\t\tthis.imageUrl = imageUrl;\r\n\t\t\t\t\t\tthis.picloading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.record.headPic = info.file.response.data.src;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbeforeUpload(file) {\r\n\t\t\t\tconst isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n\t\t\t\tif (!isJpgOrPng) {\r\n\t\t\t\t\tthis.$message.error('You can only upload JPG file!');\r\n\t\t\t\t}\r\n\t\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\r\n\t\t\t\tif (!isLt2M) {\r\n\t\t\t\t\tthis.$message.error('Image must smaller than 2MB!');\r\n\t\t\t\t}\r\n\t\t\t\treturn isJpgOrPng && isLt2M;\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n<style lang='scss'>\r\n\t.user_inputField {\r\n\t\tmargin-left: 20px;\r\n\t\twidth: 200px;\r\n\t}\r\n\t\r\n\t.selectorField {\r\n\t\tmargin-left: 20px;\r\n\t\twidth: 500px;\r\n\t}\r\n\r\n\t.poster-uploader>.ant-upload {\r\n\t\twidth: 200px;\r\n\t\theight: 240px;\r\n\t}\r\n\r\n\t.ant-upload-select-picture-card i {\r\n\t\tfont-size: 16;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.ant-upload-select-picture-card .ant-upload-text {\r\n\t\tmargin-top: 8px;\r\n\t\tcolor: #666;\r\n\t}\r\n</style>\n"]}]}