{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\user\\Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\user\\Register.vue","mtime":1614759220207},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmZ1bmN0aW9uIGdldEJhc2U2NChpbWcsIGNhbGxiYWNrKSB7Cgljb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoJcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiBjYWxsYmFjayhyZWFkZXIucmVzdWx0KSk7CglyZWFkZXIucmVhZEFzRGF0YVVSTChpbWcpOwp9OwpleHBvcnQgZGVmYXVsdCB7Cglhc3luYyBjcmVhdGVkKCkgewoJCXRoaXMuZ2V0QWxsQWdlKCk7CgkJdGhpcy5nZXRBbGxPY2N1cGF0aW9uKCk7Cgl9LAoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQlmb3JtOiB0aGlzLiRmb3JtLmNyZWF0ZUZvcm0odGhpcyksCgkJCXZpc2libGU6IGZhbHNlLAoJCQlhZ2VMaXN0OiBudWxsLAoJCQlvY2N1cGF0aW9uTGlzdDogbnVsbCwKCQkJbG9hZGluZzogZmFsc2UsCgkJCWltYWdlVXJsOiBudWxsLAoJCQl1c2VyOiB7CgkJCQkibmFtZSI6ICJ1bmRlZmluZSIsCgkJCQkicGFzc3dvcmQiOiAidW5kZWZpbmUiLAoJCQkJImdlbmRlciI6ICJ1bmRlZmluZSIsCgkJCQkiYWdlIjogbnVsbCwKCQkJCSJvY2N1cGF0aW9uIjogbnVsbCwKCQkJCSJ6aXBDb2RlIjogInVuZGVmaW5lIiwKCQkJCSJoZWFkUGljIjogImRlZmF1bHQuanBnIgoJCQl9CgkJfTsKCX0sCgltZXRob2RzOiB7CgkJYXN5bmMgZ2V0QWxsQWdlKCkgewoJCQlsZXQgewoJCQkJZGF0YQoJCQl9ID0gYXdhaXQgdGhpcy4kZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLnJlcXVlc3RQYXRoICsgJ2FsbEFnZScpOwoJCQl0aGlzLmFnZUxpc3QgPSBkYXRhLmRhdGE7CgkJfSwKCQlhc3luYyBnZXRBbGxPY2N1cGF0aW9uKCkgewoJCQlsZXQgewoJCQkJZGF0YQoJCQl9ID0gYXdhaXQgdGhpcy4kZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLnJlcXVlc3RQYXRoICsgJ2FsbE9jY3VwYXRpb24nKTsKCQkJdGhpcy5vY2N1cGF0aW9uTGlzdCA9IGRhdGEuZGF0YTsKCQl9LAoJCWFzeW5jIHVzZXJSZWdpc3RlcigpIHsKCQkJbGV0IHsKCQkJCWRhdGEKCQkJfSA9IGF3YWl0IHRoaXMuYXhpb3MucG9zdCh0aGlzLiRzdG9yZS5zdGF0ZS5yZXF1ZXN0UGF0aCArICdyZWdpc3Rlci8nLCB0aGlzLnVzZXIpOwoJCQlpZiAoZGF0YS5jb2RlID09IDApIHsKCQkJCXRoaXMub25DbG9zZSgpOwoJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCcgKO+9oe+9peKIgO+9pSnvvonvvp4g5rOo5YaM5oiQ5YqffiAnLCAxKTsKCQkJfSBlbHNlIHsKCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoJyAo77+j4paz77+j77ybKSDlh7rplJnllaZ+ICcsIDIpOwoJCQl9CgkJfSwKCQlzaG93RHJhd2VyKCkgewoJCQl0aGlzLnZpc2libGUgPSB0cnVlOwoJCX0sCgkJb25DbG9zZSgpIHsKCQkJdGhpcy52aXNpYmxlID0gZmFsc2U7CgkJCXRoaXMuaW1hZ2VVcmwgPSBudWxsOwoJCX0sCgkJaGFuZGxlQ2hhbmdlKGluZm8pIHsKCQkJaWYgKGluZm8uZmlsZS5zdGF0dXMgPT09ICd1cGxvYWRpbmcnKSB7CgkJCQl0aGlzLmxvYWRpbmcgPSB0cnVlOwoJCQkJcmV0dXJuOwoJCQl9CgkJCWlmIChpbmZvLmZpbGUuc3RhdHVzID09PSAnZG9uZScpIHsKCQkJCS8vIOS7juWJjeerr+iOt+WPluS4iuS8oOeahCBpbWctdXJsCgkJCQlnZXRCYXNlNjQoaW5mby5maWxlLm9yaWdpbkZpbGVPYmosIGltYWdlVXJsID0+IHsKCQkJCQl0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7CgkJCQkJdGhpcy5sb2FkaW5nID0gZmFsc2U7CgkJCQl9KTsKCQkJCXRoaXMudXNlci5oZWFkUGljID0gaW5mby5maWxlLnJlc3BvbnNlLmRhdGEuc3JjOwoJCQl9CgkJfSwKCQliZWZvcmVVcGxvYWQoZmlsZSkgewoJCQljb25zdCBpc0pwZ09yUG5nID0gZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZycgfHwgZmlsZS50eXBlID09PSAnaW1hZ2UvcG5nJzsKCQkJaWYgKCFpc0pwZ09yUG5nKSB7CgkJCQl0aGlzLiRtZXNzYWdlLmVycm9yKCdZb3UgY2FuIG9ubHkgdXBsb2FkIEpQRyBmaWxlIScpOwoJCQl9CgkJCWNvbnN0IGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMjsKCQkJaWYgKCFpc0x0Mk0pIHsKCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoJ0ltYWdlIG11c3Qgc21hbGxlciB0aGFuIDJNQiEnKTsKCQkJfQoJCQlyZXR1cm4gaXNKcGdPclBuZyAmJiBpc0x0Mk07CgkJfSwKCQlhc3luYyBoYW5kbGVTdWJtaXQoZSkgewoJCQllLnByZXZlbnREZWZhdWx0KCk7CgkJCXRoaXMuZm9ybS52YWxpZGF0ZUZpZWxkcygoZXJyLCB2YWx1ZXMpID0+IHsKCQkJCWlmICghZXJyKSB7CgkJCQkJdGhpcy51c2VyLm5hbWUgPSB2YWx1ZXMubmFtZTsKCQkJCQl0aGlzLnVzZXIucGFzc3dvcmQgPSB2YWx1ZXMucGFzc3dvcmQ7CgkJCQkJdGhpcy51c2VyLmdlbmRlciA9IHZhbHVlcy5nZW5kZXI7CgkJCQkJdGhpcy51c2VyLmFnZSA9IHZhbHVlcy5hZ2U7CgkJCQkJdGhpcy51c2VyLm9jY3VwYXRpb24gPSB2YWx1ZXMub2NjdXBhdGlvbjsKCQkJCQl0aGlzLnVzZXIuemlwQ29kZSA9IHZhbHVlcy56aXBDb2RlOwoJCQkJCXRoaXMudXNlclJlZ2lzdGVyKCk7CgkJCQl9CgkJCX0pOwoJCX0sCgl9LAp9Owo="},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Register.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<p style=\"margin-top: -10px; color: #1890FF; text-decoration:underline; cursor:pointer\" @click=\"showDrawer\"> Register\r\n\t\t\tnow! </p>\r\n\t\t<a-drawer title=\"注册一个新账号\" :width=\"500\" :visible=\"visible\" :body-style=\"{ paddingBottom: '80px' }\" @close=\"onClose\">\r\n\t\t\t<a-form :form=\"form\" layout=\"vertical\" hide-required-mark>\r\n\t\t\t\t<a-row :gutter=\"16\">\r\n\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t<a-form-item label=\"用户名*\">\r\n\t\t\t\t\t\t\t<a-input v-decorator=\"[\r\n                  'name',\r\n                  {\r\n                    rules: [{ required: true, message: 'User name can not be empty' }],\r\n                  },\r\n                ]\"\r\n\t\t\t\t\t\t\t placeholder=\"Please enter user name\" />\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t</a-row>\r\n\t\t\t\t<a-row :gutter=\"16\">\r\n\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t<a-form-item label=\"密码*\">\r\n\t\t\t\t\t\t\t<a-input v-decorator=\"[\r\n\t\t\t\t\t\t\t  'password',\r\n\t\t\t\t\t\t\t  { rules: [{ required: true, message: 'Password can not be empty' }] },\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t type=\"password\" placeholder=\"Password\">\r\n\t\t\t\t\t\t\t\t<a-icon slot=\"prefix\" type=\"lock\" style=\"color: rgba(0,0,0,.25)\" />\r\n\t\t\t\t\t\t\t</a-input>\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t</a-row>\r\n\t\t\t\t<a-row :gutter=\"16\">\r\n\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t<a-form-item label=\"性别\">\r\n\t\t\t\t\t\t\t<a-select v-decorator=\"['gender']\" placeholder=\"Please choose the gender\">\r\n\t\t\t\t\t\t\t\t<a-select-option value=\"M\">\r\n\t\t\t\t\t\t\t\t\t男性\r\n\t\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t\t<a-select-option value=\"F\">\r\n\t\t\t\t\t\t\t\t\t女性\r\n\t\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t<a-form-item label=\"年龄段\">\r\n\t\t\t\t\t\t\t<a-select v-decorator=\"['age']\" placeholder=\"Please choose the age\">\r\n\t\t\t\t\t\t\t\t<a-select-option :value=key v-for=\"(value, key) in ageList\">\r\n\t\t\t\t\t\t\t\t\t{{value}}\r\n\t\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t</a-row>\r\n\t\t\t\t<a-row :gutter=\"16\">\r\n\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t<a-form-item label=\"职业\">\r\n\t\t\t\t\t\t\t<a-select v-decorator=\"['occupation']\" placeholder=\"Please choose the occupation\">\r\n\t\t\t\t\t\t\t\t<a-select-option :value=key v-for=\"(value, key) in occupationList\">\r\n\t\t\t\t\t\t\t\t\t{{value}}\r\n\t\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t<a-form-item label=\"邮政编码\">\r\n\t\t\t\t\t\t\t<a-input v-decorator=\"['zipCode']\" placeholder=\"Please enter user zip-code\" />\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t</a-row>\r\n\t\t\t\t<a-row :gutter=\"16\">\r\n\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t<a-form-item label=\"头像\">\r\n\t\t\t\t\t\t\t<a-upload name=\"file\" list-type=\"picture-card\" class=\"uploader\" :show-upload-list=\"false\" :action=\"this.$store.state.requestPath + 'uploadHeadPic'\"\r\n\t\t\t\t\t\t\t :before-upload=\"beforeUpload\" @change=\"handleChange\">\r\n\t\t\t\t\t\t\t\t<a-avatar v-if=\"imageUrl\" :src=\"imageUrl\" alt=\"avatar\" :size=\"80\"> </a-avatar>\r\n\t\t\t\t\t\t\t\t<!-- <img v-if=\"imageUrl\" :src=\"imageUrl\" alt=\"avatar\" style=\"width: 128px; height: 128px;\" /> -->\r\n\t\t\t\t\t\t\t\t<div v-else>\r\n\t\t\t\t\t\t\t\t\t<a-icon :type=\"loading ? 'loading' : 'plus'\" />\r\n\t\t\t\t\t\t\t\t\t<div class=\"ant-upload-text\">\r\n\t\t\t\t\t\t\t\t\t\t上传\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</a-upload>\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t</a-row>\r\n\t\t\t</a-form>\r\n\t\t\t<div :style=\"{\r\n\t\t\t  position: 'absolute',\r\n\t\t\t  right: 0,\r\n\t\t\t  bottom: 0,\r\n\t\t\t  width: '100%',\r\n\t\t\t  borderTop: '1px solid #e9e9e9',\r\n\t\t\t  padding: '10px 16px',\r\n\t\t\t  background: '#fff',\r\n\t\t\t  textAlign: 'right',\r\n\t\t\t  zIndex: 1,\r\n\t\t\t}\">\r\n\t\t\t\t<a-button :style=\"{ marginRight: '8px' }\" @click=\"onClose\">\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</a-button>\r\n\t\t\t\t<a-button type=\"primary\" @click=\"handleSubmit\">\r\n\t\t\t\t\tSubmit\r\n\t\t\t\t</a-button>\r\n\t\t\t</div>\r\n\t\t</a-drawer>\r\n\t</div>\r\n</template>\r\n<script>\r\n\tfunction getBase64(img, callback) {\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', () => callback(reader.result));\r\n\t\treader.readAsDataURL(img);\r\n\t};\r\n\texport default {\r\n\t\tasync created() {\r\n\t\t\tthis.getAllAge();\r\n\t\t\tthis.getAllOccupation();\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tform: this.$form.createForm(this),\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tageList: null,\r\n\t\t\t\toccupationList: null,\r\n\t\t\t\tloading: false,\r\n\t\t\t\timageUrl: null,\r\n\t\t\t\tuser: {\r\n\t\t\t\t\t\"name\": \"undefine\",\r\n\t\t\t\t\t\"password\": \"undefine\",\r\n\t\t\t\t\t\"gender\": \"undefine\",\r\n\t\t\t\t\t\"age\": null,\r\n\t\t\t\t\t\"occupation\": null,\r\n\t\t\t\t\t\"zipCode\": \"undefine\",\r\n\t\t\t\t\t\"headPic\": \"default.jpg\"\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync getAllAge() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'allAge');\r\n\t\t\t\tthis.ageList = data.data;\r\n\t\t\t},\r\n\t\t\tasync getAllOccupation() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'allOccupation');\r\n\t\t\t\tthis.occupationList = data.data;\r\n\t\t\t},\r\n\t\t\tasync userRegister() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.axios.post(this.$store.state.requestPath + 'register/', this.user);\r\n\t\t\t\tif (data.code == 0) {\r\n\t\t\t\t\tthis.onClose();\r\n\t\t\t\t\tthis.$message.success(' (｡･∀･)ﾉﾞ 注册成功~ ', 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error(' (￣△￣；) 出错啦~ ', 2);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshowDrawer() {\r\n\t\t\t\tthis.visible = true;\r\n\t\t\t},\r\n\t\t\tonClose() {\r\n\t\t\t\tthis.visible = false;\r\n\t\t\t\tthis.imageUrl = null;\r\n\t\t\t},\r\n\t\t\thandleChange(info) {\r\n\t\t\t\tif (info.file.status === 'uploading') {\r\n\t\t\t\t\tthis.loading = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (info.file.status === 'done') {\r\n\t\t\t\t\t// 从前端获取上传的 img-url\r\n\t\t\t\t\tgetBase64(info.file.originFileObj, imageUrl => {\r\n\t\t\t\t\t\tthis.imageUrl = imageUrl;\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.user.headPic = info.file.response.data.src;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbeforeUpload(file) {\r\n\t\t\t\tconst isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n\t\t\t\tif (!isJpgOrPng) {\r\n\t\t\t\t\tthis.$message.error('You can only upload JPG file!');\r\n\t\t\t\t}\r\n\t\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\r\n\t\t\t\tif (!isLt2M) {\r\n\t\t\t\t\tthis.$message.error('Image must smaller than 2MB!');\r\n\t\t\t\t}\r\n\t\t\t\treturn isJpgOrPng && isLt2M;\r\n\t\t\t},\r\n\t\t\tasync handleSubmit(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.form.validateFields((err, values) => {\r\n\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\tthis.user.name = values.name;\r\n\t\t\t\t\t\tthis.user.password = values.password;\r\n\t\t\t\t\t\tthis.user.gender = values.gender;\r\n\t\t\t\t\t\tthis.user.age = values.age;\r\n\t\t\t\t\t\tthis.user.occupation = values.occupation;\r\n\t\t\t\t\t\tthis.user.zipCode = values.zipCode;\r\n\t\t\t\t\t\tthis.userRegister();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n\r\n<style>\r\n\t.uploader>.ant-upload {\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.ant-upload-select-picture-card i {\r\n\t\tfont-size: 32px;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.ant-upload-select-picture-card .ant-upload-text {\r\n\t\tmargin-top: 8px;\r\n\t\tcolor: #666;\r\n\t}\r\n</style>\n"]}]}