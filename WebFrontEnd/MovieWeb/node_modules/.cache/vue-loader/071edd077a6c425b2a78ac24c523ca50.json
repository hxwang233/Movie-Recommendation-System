{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\user\\ResetPwdPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\user\\ResetPwdPage.vue","mtime":1614771985135},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CgltYXBNdXRhdGlvbnMsCgltYXBTdGF0ZQp9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7Cgljb21wdXRlZDogewoJCS4uLm1hcFN0YXRlKFsndXNlckluZm8nLCAncmVxdWVzdFBhdGgnXSkKCX0sCglwcm9wczogWydwd2QnXSwKCWNyZWF0ZWQoKSB7CgkJdGhpcy52aXNpYmxlID0gdGhpcy5wd2Q7Cgl9LAoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQlsYWJlbENvbDogewoJCQkJc3BhbjogNAoJCQl9LAoJCQl3cmFwcGVyQ29sOiB7CgkJCQlzcGFuOiAxNAoJCQl9LAoJCQlsYWJlbENvbDogewoJCQkJc3BhbjogNAoJCQl9LAoJCQl3cmFwcGVyQ29sOiB7CgkJCQlzcGFuOiAxNAoJCQl9LAoJCQlmb3JtOiB0aGlzLiRmb3JtLmNyZWF0ZUZvcm0odGhpcyksCgkJCXZpc2libGU6IGZhbHNlLAoJCQljb25maXJtTG9hZGluZzogZmFsc2UsCgkJfTsKCX0sCgltZXRob2RzOiB7CgkJYXN5bmMgaGFuZGxlT2soZSkgewoJCQllLnByZXZlbnREZWZhdWx0KCk7CgkJCXRoaXMuZm9ybS52YWxpZGF0ZUZpZWxkcyhhc3luYyAoZXJyLCB2YWx1ZXMpID0+IHsKCQkJCWlmICghZXJyKSB7CgkJCQkJY29uc29sZS5sb2codGhpcy51c2VySW5mbykKCQkJCQlpZiAodmFsdWVzLm9sZHB3ZCA9PSB0aGlzLnVzZXJJbmZvLnBhc3N3b3JkKSB7CgkJCQkJCWlmICh2YWx1ZXMubmV3cHdkMSA9PSB2YWx1ZXMubmV3cHdkMikgewoJCQkJCQkJdGhpcy51c2VySW5mby5wYXNzd29yZCA9IHZhbHVlcy5uZXdwd2QxCgkJCQkJCQlsZXQgewoJCQkJCQkJCWRhdGEKCQkJCQkJCX0gPSBhd2FpdCB0aGlzLmF4aW9zLnBvc3QodGhpcy4kc3RvcmUuc3RhdGUucmVxdWVzdFBhdGggKyAndXNlclVwZGF0ZScgLCB0aGlzLnVzZXJJbmZvKTsKCQkJCQkJCWlmIChkYXRhLmNvZGUgPT0gMCkgewoJCQkJCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5L+u5pS55oiQ5YqfIikKCQkJCQkJCQl0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuivt+mHjeaWsOeZu+W9lX5+IikKCQkJCQkJCQl0aGlzLiRyb3V0ZXIucHVzaCgiLyIpCgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS/ruaUueWksei0pSIpCgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcigi5Lik5qyh5a+G56CB5LiN5LiA6Ie0IikKCQkJCQkJCXJldHVybjsKCQkJCQkJfQoJCQkJCX0gZWxzZSB7CgkJCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWOn+WvhueggeS4jeato+ehriIpCgkJCQkJCXJldHVybjsKCQkJCQl9CgkJCQkJdGhpcy5jb25maXJtTG9hZGluZyA9IHRydWU7CgkJCQkJc2V0VGltZW91dCgoKSA9PiB7CgkJCQkJCXRoaXMudmlzaWJsZSA9IGZhbHNlOwoJCQkJCQl0aGlzLiRlbWl0KCJjbG9zZVJlc2V0UHdkUGFnZSIpOwoJCQkJCQl0aGlzLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2U7CgkJCQkJfSwgMTAwMCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJaGFuZGxlQ2FuY2VsKCkgewoJCQl0aGlzLnZpc2libGUgPSBmYWxzZTsKCQkJdGhpcy4kZW1pdCgiY2xvc2VSZXNldFB3ZFBhZ2UiKQoJCX0sCgl9LAp9Owo="},{"version":3,"sources":["ResetPwdPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ResetPwdPage.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<a-modal title=\"修改密码\" :visible=\"visible\" :confirm-loading=\"confirmLoading\" @ok=\"handleOk\" @cancel=\"handleCancel\"\r\n\t\t @afterClose=\"handleCancel\">\r\n\t\t\t<a-form :form=\"form\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\r\n\t\t\t\t<a-form-item label=\"原密码\">\r\n\t\t\t\t\t<a-input v-decorator=\"[\r\n\t\t\t\t\t  'oldpwd',\r\n\t\t\t\t\t  { rules: [{ required: true, message: '原密码不能为空' }] },\r\n\t\t\t\t\t]\" type=\"password\"\r\n\t\t\t\t\t placeholder=\"请输入原密码\" />\r\n\t\t\t\t</a-form-item>\r\n\t\t\t\t<a-form-item label=\"新密码\">\r\n\t\t\t\t\t<a-input v-decorator=\"[\r\n\t\t\t\t\t  'newpwd1',\r\n\t\t\t\t\t  { rules: [{ required: true, message: '新密码不能为空' }] },\r\n\t\t\t\t\t]\" type=\"password\"\r\n\t\t\t\t\t placeholder=\"请输入新密码\" />\r\n\t\t\t\t</a-form-item>\r\n\t\t\t\t<a-form-item label=\"再次输入\">\r\n\t\t\t\t\t<a-input v-decorator=\"[\r\n\t\t\t\t\t  'newpwd2',\r\n\t\t\t\t\t  { rules: [{ required: true, message: '不能为空' }] },\r\n\t\t\t\t\t]\" type=\"password\"\r\n\t\t\t\t\t placeholder=\"请输入新密码\" />\r\n\t\t\t\t</a-form-item>\r\n\t\t\t</a-form>\r\n\t\t</a-modal>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from 'vuex';\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['userInfo', 'requestPath'])\r\n\t\t},\r\n\t\tprops: ['pwd'],\r\n\t\tcreated() {\r\n\t\t\tthis.visible = this.pwd;\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tlabelCol: {\r\n\t\t\t\t\tspan: 4\r\n\t\t\t\t},\r\n\t\t\t\twrapperCol: {\r\n\t\t\t\t\tspan: 14\r\n\t\t\t\t},\r\n\t\t\t\tlabelCol: {\r\n\t\t\t\t\tspan: 4\r\n\t\t\t\t},\r\n\t\t\t\twrapperCol: {\r\n\t\t\t\t\tspan: 14\r\n\t\t\t\t},\r\n\t\t\t\tform: this.$form.createForm(this),\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tconfirmLoading: false,\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync handleOk(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.form.validateFields(async (err, values) => {\r\n\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\tconsole.log(this.userInfo)\r\n\t\t\t\t\t\tif (values.oldpwd == this.userInfo.password) {\r\n\t\t\t\t\t\t\tif (values.newpwd1 == values.newpwd2) {\r\n\t\t\t\t\t\t\t\tthis.userInfo.password = values.newpwd1\r\n\t\t\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\t\t\tdata\r\n\t\t\t\t\t\t\t\t} = await this.axios.post(this.$store.state.requestPath + 'userUpdate' , this.userInfo);\r\n\t\t\t\t\t\t\t\tif (data.code == 0) {\r\n\t\t\t\t\t\t\t\t\tthis.$message.success(\"修改成功\")\r\n\t\t\t\t\t\t\t\t\tthis.$message.success(\"请重新登录~~\")\r\n\t\t\t\t\t\t\t\t\tthis.$router.push(\"/\")\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.$message.error(\"修改失败\")\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$message.error(\"两次密码不一致\")\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error(\"原密码不正确\")\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.confirmLoading = true;\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.visible = false;\r\n\t\t\t\t\t\t\tthis.$emit(\"closeResetPwdPage\");\r\n\t\t\t\t\t\t\tthis.confirmLoading = false;\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleCancel() {\r\n\t\t\t\tthis.visible = false;\r\n\t\t\t\tthis.$emit(\"closeResetPwdPage\")\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n</style>\n"]}]}