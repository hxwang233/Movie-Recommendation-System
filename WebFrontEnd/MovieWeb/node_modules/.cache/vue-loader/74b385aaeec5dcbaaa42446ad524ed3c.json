{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\user\\MovieDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\user\\MovieDetail.vue","mtime":1614691824567},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IHsKCW1hcE11dGF0aW9ucywKCW1hcFN0YXRlCn0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKCWFzeW5jIGNyZWF0ZWQoKSB7CgkJdGhpcy5nZXRNb3ZpZURldGFpbCgpOwoJCXRoaXMuZ2V0Q29tbWVudHMoKTsKCX0sCgljb21wdXRlZDogewoJCS4uLm1hcFN0YXRlKFsncmVxdWVzdFBhdGgnLCAndXNlckluZm8nLCAnbW92aWUnLCAnbW92aWVDb21tZW50cyddKQoJfSwKCW1ldGhvZHM6IHsKCQkuLi5tYXBNdXRhdGlvbnMoWyJzZXRNb3ZpZSIsICJzZXRNb3ZpZUNvbW1lbnRzIl0pLAoJCWFzeW5jIGdldE1vdmllRGV0YWlsKCkgewoJCQlsZXQgewoJCQkJZGF0YQoJCQl9ID0gYXdhaXQgdGhpcy4kZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLnJlcXVlc3RQYXRoICsgJ21vdmllLycgKyB0aGlzLiRyb3V0ZS5xdWVyeS5taWQrICcvJyArIHRoaXMudXNlckluZm8udWlkKTsKCQkJdGhpcy5zZXRNb3ZpZShkYXRhKTsKCQl9LAoJCWFzeW5jIGdldENvbW1lbnRzKCkgewoJCQlsZXQgewoJCQkJZGF0YQoJCQl9ID0gYXdhaXQgdGhpcy4kZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLnJlcXVlc3RQYXRoICsgJ2NvbW1lbnQvZ2V0LycgKyB0aGlzLiRyb3V0ZS5xdWVyeS5taWQpOwoJCQl0aGlzLnNldE1vdmllQ29tbWVudHMoZGF0YSk7CgkJCXRoaXMuY29tbWVudHMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5tb3ZpZUNvbW1lbnRzOwoJCX0sCgkJYWRkQ29tbWVudChjb250ZW50KSB7CgkJCWxldCBjb21tZW50ID0gewoJCQkJdWlkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby51aWQsCgkJCQltaWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5Lm1pZCwKCQkJCWNvbnRlbnQ6IGNvbnRlbnQKCQkJfTsKCQkJbGV0IHsKCQkJCWRhdGEKCQkJfSA9IHRoaXMuYXhpb3MucG9zdCh0aGlzLiRzdG9yZS5zdGF0ZS5yZXF1ZXN0UGF0aCArICdjb21tZW50L2FkZCcsIGNvbW1lbnQpLnRoZW4oKHJlcykgPT4gewoJCQkJaWYgKHJlcy5kYXRhLmNvZGUgIT0gMCkgewoJCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoJyAo77+j4paz77+j77ybKSDmj5DkuqTor4TorrrlpLHotKV+IOWGjeivleivleWQpyAnLCAxKTsKCQkJCX0gZWxzZSB7CgkJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCcgPCjvv6PvuLbvv6MpPiDmhJ/osKLmgqjnmoTor4Torrp+ICcsIDEpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCWhhbmRsZVN1Ym1pdCgpIHsKCQkJaWYgKCF0aGlzLnZhbHVlKSB7CgkJCQlyZXR1cm47CgkJCX0KCQkJdGhpcy5zdWJtaXR0aW5nID0gdHJ1ZTsKCQkJc2V0VGltZW91dCgoKSA9PiB7CgkJCQl0aGlzLmFkZENvbW1lbnQodGhpcy52YWx1ZSk7CgkJCQl0aGlzLnN1Ym1pdHRpbmcgPSBmYWxzZTsKCQkJCXRoaXMuY29tbWVudHMgPSBbewoJCQkJCQl1bmFtZTogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ubmFtZSwKCQkJCQkJaGVhZFBpYzogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8uaGVhZFBpYywKCQkJCQkJY29udGVudDogdGhpcy52YWx1ZSwKCQkJCQkJY3JlYXRlZFRpbWU6IG1vbWVudCgpLAoJCQkJCX0sCgkJCQkJLi4udGhpcy5jb21tZW50cywKCQkJCV07CgkJCQl0aGlzLnZhbHVlID0gJyc7CgkJCX0sIDEwMDApOwoJCX0sCgkJaGFuZGxlQ2hhbmdlKGUpIHsKCQkJdGhpcy52YWx1ZSA9IGUudGFyZ2V0LnZhbHVlOwoJCX0sCgl9LAoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQl0c3R5bGU6IHsKCQkJCSJmb250LXNpemUiOiAieHgtbGFyZ2UiCgkJCX0sCgkJCWNvbW1lbnRzOiB0aGlzLiRzdG9yZS5zdGF0ZS5tb3ZpZUNvbW1lbnRzLAoJCQlzdWJtaXR0aW5nOiBmYWxzZSwKCQkJdmFsdWU6ICcnLAoJCQltb21lbnQsCgkJfTsKCX0sCn0K"},{"version":3,"sources":["MovieDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MovieDetail.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\r\n\t<div id=\"detail\" v-if=\"movie\">\r\n\t\t<div id=\"detail-pic\">\r\n\t\t\t<a-card :bordered=\"false\" style=\"width: 240px\">\r\n\t\t\t\t<img slot=\"cover\" alt=\"example\" :src=\"requestPath + 'movieposter/' + movie.pic\" />\r\n\t\t\t</a-card>\r\n\t\t</div>\r\n\t\t<div id=\"detail-text\">\r\n\t\t\t<a-card :title=\"movie.name\" :bordered=\"false\" style=\"width: 700px\" :headStyle=\"tstyle\">\r\n\t\t\t\t<div id=\"card-text\">\r\n\t\t\t\t\t<p>导演：<b>{{movie.directors}}</b></p>\r\n\t\t\t\t\t<p>编剧：<b>{{movie.writers}}</b></p>\r\n\t\t\t\t\t<p>演员：<b>{{movie.stars}}</b></p>\r\n\t\t\t\t\t<p>类别：<b>{{movie.genre}}</b></p>\r\n\t\t\t\t\t<p>片长：<b>{{movie.playTime}}</b></p>\r\n\t\t\t\t\t<p>上映日期：<b>{{movie.releaseTime}}</b></p>\r\n\t\t\t\t</div>\r\n\t\t\t</a-card>\r\n\t\t</div>\r\n\t\t<a-divider orientation=\"left\">\r\n\t\t\t简介\r\n\t\t</a-divider>\r\n\t\t<div id=\"detail-intro\">\r\n\t\t\t<a-card :bordered=\"false\" style=\"width: 1200px\">\r\n\t\t\t\t<div id=\"detail-intro-text\">\r\n\t\t\t\t\t<p>{{movie.intro}}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</a-card>\r\n\t\t</div>\r\n\t\t<a-divider orientation=\"left\">\r\n\t\t\t影评\r\n\t\t</a-divider>\r\n\t\t<div v-if=\"$store.state.userInfo\">\r\n\t\t\t<div class=\"detail-comment\">\r\n\t\t\t\t<a-list class=\"comment-list\" :header=\"`${comments.length} ${comments.length > 1 ? 'replies' : 'reply'}`\"\r\n\t\t\t\t item-layout=\"horizontal\" :data-source=\"comments\">\r\n\t\t\t\t\t<a-list-item slot=\"renderItem\" slot-scope=\"item, index\">\r\n\t\t\t\t\t\t<a-comment :author=\"item.uname\" :avatar=\"requestPath + 'userpic/' + item.headPic\">\r\n\t\t\t\t\t\t\t<p slot=\"content\">{{ item.content }}</p>\r\n\t\t\t\t\t\t\t<a-tooltip slot=\"datetime\" :title=\"moment(item.createdTime).format('YYYY-MM-DD HH:mm:ss')\">\r\n\t\t\t\t\t\t\t\t<span>{{ moment(item.createdTime).fromNow() }}</span>\r\n\t\t\t\t\t\t\t</a-tooltip>\r\n\t\t\t\t\t\t</a-comment>\r\n\t\t\t\t\t</a-list-item>\r\n\t\t\t\t</a-list>\r\n\t\t\t</div>\r\n\t\t\t<a-divider orientation=\"left\">\r\n\t\t\t\t说点什么吧...\r\n\t\t\t</a-divider>\r\n\t\t\t<div class=\"detail-comment\">\r\n\t\t\t\t<a-comment>\r\n\t\t\t\t\t<a-avatar slot=\"avatar\" :src=\"requestPath + 'userpic/' +userInfo.headPic\" :alt=\"userInfo.name\" />\r\n\t\t\t\t\t<div slot=\"content\">\r\n\t\t\t\t\t\t<a-form-item>\r\n\t\t\t\t\t\t\t<a-textarea :rows=\"4\" :value=\"value\" @change=\"handleChange\" style=\"width: 1100px;\"/>\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t<a-form-item>\r\n\t\t\t\t\t\t\t<a-button html-type=\"submit\" :loading=\"submitting\" type=\"primary\" @click=\"handleSubmit\">\r\n\t\t\t\t\t\t\t\t提交\r\n\t\t\t\t\t\t\t</a-button>\r\n\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a-comment>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"detail-comment\" v-else>\r\n\t\t\t<p><a href=\"/\">登录</a>后查看</p>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport moment from 'moment';\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from \"vuex\";\r\n\texport default {\r\n\t\tasync created() {\r\n\t\t\tthis.getMovieDetail();\r\n\t\t\tthis.getComments();\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['requestPath', 'userInfo', 'movie', 'movieComments'])\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\"setMovie\", \"setMovieComments\"]),\r\n\t\t\tasync getMovieDetail() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'movie/' + this.$route.query.mid+ '/' + this.userInfo.uid);\r\n\t\t\t\tthis.setMovie(data);\r\n\t\t\t},\r\n\t\t\tasync getComments() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'comment/get/' + this.$route.query.mid);\r\n\t\t\t\tthis.setMovieComments(data);\r\n\t\t\t\tthis.comments = this.$store.state.movieComments;\r\n\t\t\t},\r\n\t\t\taddComment(content) {\r\n\t\t\t\tlet comment = {\r\n\t\t\t\t\tuid: this.$store.state.userInfo.uid,\r\n\t\t\t\t\tmid: this.$route.query.mid,\r\n\t\t\t\t\tcontent: content\r\n\t\t\t\t};\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = this.axios.post(this.$store.state.requestPath + 'comment/add', comment).then((res) => {\r\n\t\t\t\t\tif (res.data.code != 0) {\r\n\t\t\t\t\t\tthis.$message.error(' (￣△￣；) 提交评论失败~ 再试试吧 ', 1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.success(' <(￣︶￣)> 感谢您的评论~ ', 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleSubmit() {\r\n\t\t\t\tif (!this.value) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.submitting = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.addComment(this.value);\r\n\t\t\t\t\tthis.submitting = false;\r\n\t\t\t\t\tthis.comments = [{\r\n\t\t\t\t\t\t\tuname: this.$store.state.userInfo.name,\r\n\t\t\t\t\t\t\theadPic: this.$store.state.userInfo.headPic,\r\n\t\t\t\t\t\t\tcontent: this.value,\r\n\t\t\t\t\t\t\tcreatedTime: moment(),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t...this.comments,\r\n\t\t\t\t\t];\r\n\t\t\t\t\tthis.value = '';\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\thandleChange(e) {\r\n\t\t\t\tthis.value = e.target.value;\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttstyle: {\r\n\t\t\t\t\t\"font-size\": \"xx-large\"\r\n\t\t\t\t},\r\n\t\t\t\tcomments: this.$store.state.movieComments,\r\n\t\t\t\tsubmitting: false,\r\n\t\t\t\tvalue: '',\r\n\t\t\t\tmoment,\r\n\t\t\t};\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang='scss'>\r\n\t#detail {\r\n\t\tmargin: 0 120px 50px 120px;\r\n\r\n\t\t#detail-pic {\r\n\t\t\tfloat: left;\r\n\t\t\tmargin: 70px 20px 50px 150px;\r\n\t\t}\r\n\r\n\t\t#detail-text {\r\n\t\t\tfloat: left;\r\n\t\t\tpadding: 30px;\r\n\t\t\tmargin: 30px 20px 50px 40px;\r\n\r\n\t\t\t#card-text {\r\n\t\t\t\tfont-size: medium;\r\n\t\t\t\tpadding: 20px 30px 20px 24px;\r\n\t\t\t\tmargin: -20px;\r\n\t\t\t\tbackground: #ECECEC;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t#detail-intro {\r\n\t\t\tfloat: left;\r\n\t\t\tmargin: -10px 20px 30px 70px;\r\n\r\n\t\t\t#detail-intro-text {\r\n\t\t\t\tpadding: 5px 30px 20px 30px;\r\n\t\t\t\tmargin: -20px;\r\n\t\t\t\tbackground: #ECECEC;\r\n\t\t\t\tfont-size: medium;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.detail-comment {\r\n\t\t\tmargin: 10px 20px 20px 70px;\r\n\t\t}\r\n\t}\r\n</style>\n"]}]}