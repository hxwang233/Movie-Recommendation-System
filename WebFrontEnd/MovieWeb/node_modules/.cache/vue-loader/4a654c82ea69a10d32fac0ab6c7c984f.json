{"remainingRequest":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\user\\HistoryViewPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\src\\components\\user\\HistoryViewPage.vue","mtime":1617006194852},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebApplication\\WebFrontEnd\\MovieWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CglNb2RhbAp9IGZyb20gJ2FudC1kZXNpZ24tdnVlJzsKaW1wb3J0IHsKCW1hcE11dGF0aW9ucywKCW1hcFN0YXRlCn0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKCXByb3BzOiBbJ2hvcGVuJ10sCglhc3luYyBjcmVhdGVkKCkgewoJCXRoaXMuYWxsSGlzdG9yeSgpOwoJCXRoaXMudmlzaWJsZSA9IHRoaXMuaG9wZW47CQkKCX0sCgljb21wdXRlZDogewoJCS4uLm1hcFN0YXRlKFsncmVxdWVzdFBhdGgnLCAndXNlckluZm8nLCdwaWNSZXF1ZXN0UGF0aCddKSwKCX0sCglkYXRhKCkgewoJCXJldHVybiB7CgkJCXZpc2libGU6IGZhbHNlLAoJCQlkYXRhU291cmNlOiBbXSwKCQl9OwoJfSwKCW1ldGhvZHM6IHsKCQlhc3luYyBhbGxIaXN0b3J5KCkgewoJCQlsZXQgewoJCQkJZGF0YQoJCQl9ID0gYXdhaXQgdGhpcy4kZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLnJlcXVlc3RQYXRoICsgJ2hpc3Rvcnlfdmlldy8nICsgdGhpcy51c2VySW5mby51aWQpOwoJCQlpZiAoZGF0YS5jb2RlID09IDApIHsKCQkJCXRoaXMuZGF0YVNvdXJjZSA9IGRhdGEuZGF0YTsKCQkJfQoJCX0sCgkJb25DbG9zZSgpIHsKCQkJdGhpcy4kZW1pdCgiY2xvc2VIaXN0b3J5Vmlld1dpbmRvdyIpOwoJCQl0aGlzLnZpc2libGUgPSBmYWxzZTsKCQl9LAoJCWFzeW5jIGRlbChtaWQpewoJCQlsZXQgewoJCQkJZGF0YQoJCQl9ID0gYXdhaXQgdGhpcy4kZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLnJlcXVlc3RQYXRoICsgJ2hpc3Rvcnlfdmlldy9kZWwvJysgbWlkICsnLycgKyB0aGlzLnVzZXJJbmZvLnVpZCk7CgkJCWlmIChkYXRhLmNvZGUgPT0gMCkgewoJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip8iKTsKCQkJCXRoaXMuYWxsSGlzdG9yeSgpOwoJCQl9ZWxzZXsKCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWIoOmZpOWksei0pSIpCgkJCX0KCQl9LAoJCWFzeW5jIGFsbERlbCgpewoJCQlsZXQgewoJCQkJZGF0YQoJCQl9ID0gYXdhaXQgdGhpcy4kZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLnJlcXVlc3RQYXRoICsgJ2hpc3Rvcnlfdmlldy9kZWxfYWxsLycgKyB0aGlzLnVzZXJJbmZvLnVpZCk7CgkJCWlmIChkYXRhLmNvZGUgPT0gMCkgewoJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmuIXnqbrmiJDlip8iKTsKCQkJCXRoaXMuYWxsSGlzdG9yeSgpOwoJCQl9ZWxzZXsKCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoIua4heepuuWksei0pSIpCgkJCX0KCQl9LAoJCWxpbmtUb01vdmllKG1pZCl7CgkJCXRoaXMub25DbG9zZSgpOwoJCQl0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDonL2hvbWUvbW92aWVfZGV0YWlsJywgcXVlcnk6eydtaWQnOiBtaWR9fSk7CgkJfQoJfSwKfTsK"},{"version":3,"sources":["HistoryViewPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HistoryViewPage.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<a-drawer title=\"我的浏览记录\" width=\"520\" :closable=\"false\" :visible=\"visible\" @close=\"onClose\">\r\n\t\t\t<a-list item-layout=\"horizontal\" :data-source=\"dataSource\">\r\n\t\t\t\t<a-list-item slot=\"renderItem\" slot-scope=\"item, index\">\r\n\t\t\t\t\t<a-list-item-meta :description=\"item.intro\">\r\n\t\t\t\t\t\t<a slot=\"title\" @click=\"linkToMovie(item.mid)\">{{ item.name }}</a>\r\n\t\t\t\t\t\t<a-avatar slot=\"avatar\" shape=\"square\" :size=\"100\" :src=\"picRequestPath + 'poster/' + item.pic\" />\r\n\t\t\t\t\t</a-list-item-meta>\r\n\t\t\t\t\t<a slot=\"actions\" @click=\"del(item.mid)\">删除</a>\r\n\t\t\t\t</a-list-item>\r\n\t\t\t</a-list>\r\n\t\t\t<div style=\"margin-top: 10px;\">\r\n\t\t\t\t<a-button type=\"primary\" @click=\"allDel\" :disabled=\"dataSource.length>0?false:true\">\r\n\t\t\t\t\t全部清空\r\n\t\t\t\t</a-button>\r\n\t\t\t</div>\r\n\t\t</a-drawer>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tModal\r\n\t} from 'ant-design-vue';\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapState\r\n\t} from \"vuex\";\r\n\texport default {\r\n\t\tprops: ['hopen'],\r\n\t\tasync created() {\r\n\t\t\tthis.allHistory();\r\n\t\t\tthis.visible = this.hopen;\t\t\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['requestPath', 'userInfo','picRequestPath']),\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tdataSource: [],\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync allHistory() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'history_view/' + this.userInfo.uid);\r\n\t\t\t\tif (data.code == 0) {\r\n\t\t\t\t\tthis.dataSource = data.data;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonClose() {\r\n\t\t\t\tthis.$emit(\"closeHistoryViewWindow\");\r\n\t\t\t\tthis.visible = false;\r\n\t\t\t},\r\n\t\t\tasync del(mid){\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'history_view/del/'+ mid +'/' + this.userInfo.uid);\r\n\t\t\t\tif (data.code == 0) {\r\n\t\t\t\t\tthis.$message.success(\"删除成功\");\r\n\t\t\t\t\tthis.allHistory();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$message.error(\"删除失败\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync allDel(){\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$get(this.$store.state.requestPath + 'history_view/del_all/' + this.userInfo.uid);\r\n\t\t\t\tif (data.code == 0) {\r\n\t\t\t\t\tthis.$message.success(\"清空成功\");\r\n\t\t\t\t\tthis.allHistory();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$message.error(\"清空失败\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlinkToMovie(mid){\r\n\t\t\t\tthis.onClose();\r\n\t\t\t\tthis.$router.push({path:'/home/movie_detail', query:{'mid': mid}});\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n</style>\n"]}]}